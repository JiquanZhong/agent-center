import{g as h}from"./index-BfUSGbfi.js";import{_ as f,a as m}from"./index-82RoH2Kh.js";import{u as d}from"./vue-router-2RbTs74B.js";import{l as n,o as y,U as C,a2 as g,u as v,R as _,S as w}from"./@vue-CFjPwn9D.js";import"./axios-upsvKRUO.js";import"./pinia-BYoSazbl.js";import"./dayjs-DoMtMbyJ.js";import"./@babel-CuAkI3ff.js";import"./ant-design-vue-N94YJPlZ.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@ant-design-DyEdRgPf.js";import"./@ctrl-3cdSgQbg.js";import"./lodash-es-mOee43Rj.js";import"./vue-types-B67A5qzE.js";const I={__name:"index",setup(S){const t=m(),i=d(),r=n(""),s=n(""),a=n(null),u=n(!1);y(()=>{l()});const p=()=>{debugger;try{window.DiitAiChat.register("ai-chat","/lib/chatTheme.css")}catch{}var e=document.querySelector("#ai-chat");a.value.chatConfig.apiConfig.user=r.value,a.value.chatConfig.apiConfig.company=s.value;debugger;e.chatConfig=a.value.chatConfig,i.query.chooseKey&&e.switchChatSessions(i.query.chooseKey),i.query.onlyShow&&(u.value=!0),t.setCredentials({userId:r.value,apiKey:a.value.chatConfig.apiConfig.apiKey,company:s.value})},l=()=>{var e=h();if(e||alert("未获取正确的appId，请于提供方确认"),a.value=window.appsConfig.find(function(o){return o.appId=e}),t.userId&&t.apiKey){var c=document.querySelector("#ai-chat");a.value.chatConfig.apiConfig.user=t.userId,a.value.chatConfig.apiConfig.company=t.company,c.chatConfig=a.value.chatConfig,i.query.chooseKey&&c.switchChatSessions(i.query.chooseKey)}window.addEventListener("message",function(o){r.value=o.data.userId,s.value=o.data.company,p()})};return(e,c)=>{const o=_("ai-chat");return w(),C(o,{id:"ai-chat",class:g({"only-show":v(u)}),style:{width:"100%"}},null,8,["class"])}}},L=f(I,[["__scopeId","data-v-137f67ae"]]);export{L as default};
