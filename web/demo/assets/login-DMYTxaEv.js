import{F as R,a as f,I as U,_ as h,b as x}from"./ant-design-vue--Wr84Izy.js";import{h as I,C as l,g as N,u as y,a as b}from"./index-BsLPKckO.js";import{u as C}from"./vue-router-D8gsG8iB.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as v,o as T,a5 as k,a2 as s,c as a,a1 as p,u as r,a0 as q}from"./@vue-B5btswkz.js";import"./@babel-Dd5QU_Ri.js";import"./@ant-design-B-ejxF28.js";import"./@ctrl-3cdSgQbg.js";import"./lodash-es-CSO40SSR.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./dayjs-bdfbxlhH.js";import"./vue-types-B67A5qzE.js";import"./dom-align-OCOKWGcj.js";import"./async-validator-P8scd9xB.js";import"./scroll-into-view-if-needed-BYx7v0DY.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./axios-upsvKRUO.js";import"./pinia-DuIsOk5z.js";import"./vxe-pc-ui-B3rMWPmo.js";import"./xe-utils-BVyeMf_3.js";import"./@vxe-ui-ivSiCnOc.js";import"./dom-zindex-DlWB42XF.js";import"./vxe-table-CY8UZVkh.js";const B=""+new URL("loginLogo-DfHNUvP8.png",import.meta.url).href;function F(c){return I.request({method:"post",url:"/diit-system/jwt/login",data:c})}const M={class:"login-main"},S={class:"login-box"},A={__name:"login",setup(c){const n=b(),d=C(),e=v({username:"",password:""}),g=v(null);T(()=>{});const u=async()=>{await g.value.validate();const i=await F({loginName:e.value.username,password:e.value.password}).catch(()=>{f.error("密码错误，请核对后重试")});if(i.code!=="200")f.error(i.msg);else{n.set(l.TOKEN_NAME,i.data);const o=await N(e.value.username);n.set(l.USER_NAME,e.value.username),y().setUser(o.data);const m=n.get(l.REDIRECT_ROUTE_NAME),t=n.get(l.REDIRECT_ROUTE_QUERY);t?d.push({path:m||"/chat",query:t}):d.push({path:m||"/chat"})}};return(i,o)=>{const m=U,t=h,w=x,E=R;return q(),k("div",M,[o[3]||(o[3]=s("div",{class:"login-logo"},[s("img",{src:B})],-1)),s("div",S,[o[2]||(o[2]=s("div",{class:"login-box-top"},[s("div",{class:"login-box-text"},"欢迎登陆"),s("div",{class:"login-box-welcome"},"自然资源行业“后土”大模型")],-1)),a(E,{ref_key:"messageForm",ref:g,model:r(e),name:"normal_login",class:"login-form"},{default:p(()=>[a(t,{name:"username",rules:[{required:!0,message:"请输入用户名!"}]},{default:p(()=>[a(m,{id:"username",value:r(e).username,"onUpdate:value":o[0]||(o[0]=_=>r(e).username=_),class:"commonInput inputLine",name:"username",size:"large",placeholder:"请输入用户名",onPressEnter:u},null,8,["value"])]),_:1}),a(t,{name:"password",rules:[{required:!0,message:"请输入密码!"}]},{default:p(()=>[a(w,{id:"password",value:r(e).password,"onUpdate:value":o[1]||(o[1]=_=>r(e).password=_),class:"inputLine",name:"password",size:"large",placeholder:"请输入密码",onPressEnter:u},null,8,["value"])]),_:1}),a(t,{style:{"margin-bottom":"0px"}},{default:p(()=>[s("div",{class:"loginBtn",onClick:u},"登  录")]),_:1})]),_:1},8,["model"])])])}}},io=L(A,[["__scopeId","data-v-4f60c65a"]]);export{io as default};
