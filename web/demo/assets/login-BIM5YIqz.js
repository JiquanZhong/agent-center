import{F as E,a as x,I as U,_ as N,b as I}from"./ant-design-vue-D2rNv0Za.js";import{h as R,C as d,g as b,u as h,a as y}from"./index-fnIswVQC.js";import{u as C}from"./vue-router-De4T6OwY.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as g,o as k,a4 as B,_ as s,c as t,Z as n,u as a,Y as F}from"./@vue-Dw5Xbrmr.js";import"./@babel-CMLFsLIC.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./lodash-es-DTyaW6b9.js";import"./async-validator-P8scd9xB.js";import"./@ant-design-DxBmdqxm.js";import"./@ctrl-3cdSgQbg.js";import"./scroll-into-view-if-needed-BYx7v0DY.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./dayjs-BkTfh5k6.js";import"./vue-types-B67A5qzE.js";import"./dom-align-OCOKWGcj.js";import"./axios-upsvKRUO.js";import"./pinia-KBq3_NPl.js";const M=""+new URL("loginLogo-DfHNUvP8.png",import.meta.url).href;function S(_){return R.request({method:"post",url:"/diit-system/jwt/login",data:_})}const q={class:"login-main"},A={class:"login-box"},P={__name:"login",setup(_){const i=y(),f=C(),o=g({username:"",password:""}),c=g(null);k(()=>{});const m=async()=>{await c.value.validate();const r=await S({loginName:o.value.username,password:o.value.password});if(r.code!=="200")x.error(r.msg);else{i.set(d.TOKEN_NAME,r.data);const e=await b(o.value.username);i.set(d.USER_NAME,o.value.username),h().setUser(e.data);const l=i.get(d.REDIRECT_ROUTE_NAME);f.push({path:l||"/"})}};return(r,e)=>{const l=U,u=N,v=I,w=E;return F(),B("div",q,[e[3]||(e[3]=s("div",{class:"login-logo"},[s("img",{src:M})],-1)),s("div",A,[e[2]||(e[2]=s("div",{class:"login-box-top"},[s("div",{class:"login-box-text"}," 欢迎登陆 "),s("div",{class:"login-box-welcome"}," 自然资源行业“后土”大模型 ")],-1)),t(w,{ref_key:"messageForm",ref:c,model:a(o),name:"normal_login",class:"login-form"},{default:n(()=>[t(u,{name:"username",rules:[{required:!0,message:"请输入用户名!"}]},{default:n(()=>[t(l,{id:"username",value:a(o).username,"onUpdate:value":e[0]||(e[0]=p=>a(o).username=p),class:"commonInput inputLine",name:"username",size:"large",placeholder:"请输入用户名",onPressEnter:m},null,8,["value"])]),_:1}),t(u,{name:"password",rules:[{required:!0,message:"请输入密码!"}]},{default:n(()=>[t(v,{id:"password",value:a(o).password,"onUpdate:value":e[1]||(e[1]=p=>a(o).password=p),class:"inputLine",name:"password",size:"large",placeholder:"请输入密码",onPressEnter:m},null,8,["value"])]),_:1}),t(u,{style:{"margin-bottom":"0px"}},{default:n(()=>[s("div",{class:"loginBtn",onClick:m}," 登  录 ")]),_:1})]),_:1},8,["model"])])])}}},se=L(P,[["__scopeId","data-v-cd3942f6"]]);export{se as default};
