import{a as Z,M as L,F as G,d as V,I as k,_ as H,D as j,B as E,e as b,f as W}from"./ant-design-vue-D2rNv0Za.js";import{r as l,a as K,o as J,a4 as I,c as a,Z as o,u as s,G as O,_ as m,B as P,Y as T,E as C,X as $,a1 as ee,n as te}from"./@vue-Dw5Xbrmr.js";import{d as r}from"./dayjs-BkTfh5k6.js";import{h as ae}from"./index-fnIswVQC.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{x as oe,U as ne}from"./@ant-design-DxBmdqxm.js";import"./@babel-CMLFsLIC.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./lodash-es-DTyaW6b9.js";import"./async-validator-P8scd9xB.js";import"./scroll-into-view-if-needed-BYx7v0DY.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./vue-types-B67A5qzE.js";import"./@ctrl-3cdSgQbg.js";import"./dom-align-OCOKWGcj.js";import"./axios-upsvKRUO.js";import"./vue-router-De4T6OwY.js";import"./pinia-KBq3_NPl.js";const ie="data:image/png;base64,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";function le(x){return ae.request({method:"get",url:"/api/dashboard/chat-conversations",params:x})}const re={class:"monitor-logs-container"},me=["src"],de={class:"main-content"},ce={class:"search-section"},pe={class:"table-section"},ue={__name:"index",setup(x){l([]);const p=l(!1),Y=l(""),w=l(""),X=l(null),R=[{title:"系统名称",dataIndex:"system_name",width:180,ellipsis:!0},{title:"对话标题",dataIndex:"name",width:300,ellipsis:!0},{title:"用户ID",dataIndex:"from_end_user_session_id",width:150,align:"center"},{title:"用户名称",dataIndex:"front_end_user_id",width:120,align:"center"},{title:"创建时间",dataIndex:"created_at",sorter:(t,e)=>r(t.createTime)-r(e.createTime),customRender:({text:t})=>r(Number(t)*1e3).format("YYYY-MM-DD HH:mm:ss")},{title:"更新时间",dataIndex:"updated_at",sorter:(t,e)=>r(t.updateTime)-r(e.updateTime),customRender:({text:t})=>r(Number(t)*1e3).format("YYYY-MM-DD HH:mm:ss")},{title:"对话次数",dataIndex:"message_count",width:100,align:"center"},{title:"操作",dataIndex:"operation",width:100,align:"center",fixed:"right"}],M=t=>{Object.assign(d,t),u()},y=l([]),n=K({systemName:"",createTime:"",userName:"",dialogTitle:""}),d=K({current:1,pageSize:10,total:50,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:t=>`共 ${t} 条`}),v=l(!1),A=l(!1),g=l(!1);J(()=>{u()});const u=async(t={})=>{try{v.value=!0;const e={...n,createTime:n.createTime?r(n.createTime).format("YYYY-MM-DD HH:mm:ss"):"",page:d.current,limit:d.pageSize},f=await le(e);d.total=f.total,y.value=f.data,console.log("Fetch data with params:",t)}catch{Z.error("数据加载失败")}finally{v.value=!1}},q=()=>{g.value=!0,u()},z=()=>{Object.assign(n,{systemName:void 0,createTime:null,userName:"",dialogTitle:""}),g.value=!1,u()},Q=t=>{w.value=t.id,p.value=!0,Y.value=`${window.houtuServeConfig.viewChatUrl}&chooseKey=${t.id}&&onlyShow=1`,te(()=>{X.value.contentWindow.postMessage({userId:t.from_end_user_session_id,company:t.system_name})})};return(t,e)=>{const f=L,h=k,c=H,F=j,U=E,N=b,B=G,D=W,_=V;return T(),I("div",re,[a(f,{visible:s(p),"onUpdate:visible":e[0]||(e[0]=i=>O(p)?p.value=i:null),title:"",footer:null,style:{width:"40%"},bodyStyle:{height:"80vh"}},{default:o(()=>[(T(),I("iframe",{ref_key:"iframeRef",ref:X,src:s(Y),key:s(w),width:"100%",height:"100%"},null,8,me))]),_:1},8,["visible"]),m("div",de,[e[8]||(e[8]=m("div",{class:"header-section"},[m("img",{src:ie}),m("h1",{class:"page-title"},"监控日志")],-1)),m("div",ce,[a(B,{model:s(n),layout:"inline",class:"advanced-search-form",onSubmit:P(q,["prevent"])},{default:o(()=>[a(c,{label:"系统名称：",class:"form-item-custom"},{default:o(()=>[a(h,{value:s(n).systemName,"onUpdate:value":e[1]||(e[1]=i=>s(n).systemName=i),placeholder:"全部",style:{width:"200px"},"allow-clear":""},null,8,["value"])]),_:1}),a(c,{label:"创建时间：",class:"form-item-custom"},{default:o(()=>[a(F,{value:s(n).createTime,"onUpdate:value":e[2]||(e[2]=i=>s(n).createTime=i),"show-time":"",format:"YYYY-MM-DD HH:mm:ss",style:{width:"240px"},placeholder:"请选择日期"},null,8,["value"])]),_:1}),a(c,{label:"用户名称：",class:"form-item-custom"},{default:o(()=>[a(h,{value:s(n).userName,"onUpdate:value":e[3]||(e[3]=i=>s(n).userName=i),placeholder:"请输入用户名称","allow-clear":"",style:{width:"180px"}},null,8,["value"])]),_:1}),a(c,{label:"对话标题：",class:"form-item-custom"},{default:o(()=>[a(h,{value:s(n).dialogTitle,"onUpdate:value":e[4]||(e[4]=i=>s(n).dialogTitle=i),placeholder:"请输入关键字","allow-clear":"",style:{width:"240px"}},null,8,["value"])]),_:1}),a(c,{class:"form-item-custom"},{default:o(()=>[a(N,{size:16},{default:o(()=>[a(U,{"html-type":"submit",loading:s(A),class:"main-btn"},{icon:o(()=>[a(s(oe))]),default:o(()=>[e[5]||(e[5]=C(" 搜索 "))]),_:1},8,["loading"]),a(U,{onClick:z,class:"main-btn"},{icon:o(()=>[a(s(ne))]),default:o(()=>[e[6]||(e[6]=C(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),m("div",pe,[a(_,{columns:R,"data-source":s(y),loading:s(v),pagination:s(d),scroll:{x:1200,y:"calc(100vh - 280px)"},bordered:"",size:"middle","row-key":"id",sticky:"",onChange:M},{bodyCell:o(({column:i,record:S})=>[i.dataIndex==="operation"?(T(),$(N,{key:0,size:8},{default:o(()=>[a(U,{type:"link",size:"small",onClick:fe=>Q(S)},{default:o(()=>e[7]||(e[7]=[C(" 查看 ")])),_:2},1032,["onClick"])]),_:2},1024)):ee("",!0)]),emptyText:o(()=>[a(D,{description:s(g)?"暂无相关数据":"暂无数据"},null,8,["description"])]),_:1},8,["data-source","loading","pagination"])])])])}}},ze=se(ue,[["__scopeId","data-v-20a6f03e"]]);export{ze as default};
