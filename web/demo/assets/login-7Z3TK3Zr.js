import{F as x,a as g,I as U,_ as N,b as h}from"./ant-design-vue-CrukgR9D.js";import{h as I,C as d,g as R,u as b,a as y}from"./index-BVqB7X3U.js";import{u as C}from"./vue-router-ue3rUI8W.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as f,o as k,a5 as B,a2 as s,c as t,a1 as n,u as a,a0 as F}from"./@vue-CWpNdP1s.js";import"./@babel-Dd5QU_Ri.js";import"./@ant-design-DFXrkwDm.js";import"./@ctrl-3cdSgQbg.js";import"./lodash-es-CSO40SSR.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./dayjs-bdfbxlhH.js";import"./vue-types-B67A5qzE.js";import"./dom-align-OCOKWGcj.js";import"./async-validator-P8scd9xB.js";import"./scroll-into-view-if-needed-BYx7v0DY.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./axios-upsvKRUO.js";import"./pinia-CkGp7EET.js";import"./vxe-pc-ui-DQu1CKTT.js";import"./xe-utils-BVyeMf_3.js";import"./@vxe-ui-Cq5EmHE1.js";import"./dom-zindex-DlWB42XF.js";import"./vxe-table-DW2_iyJ9.js";const M=""+new URL("loginLogo-DfHNUvP8.png",import.meta.url).href;function S(_){return I.request({method:"post",url:"/diit-system/jwt/login",data:_})}const q={class:"login-main"},A={class:"login-box"},P={__name:"login",setup(_){const i=y(),v=C(),e=f({username:"",password:""}),c=f(null);k(()=>{});const m=async()=>{await c.value.validate();const r=await S({loginName:e.value.username,password:e.value.password}).catch(()=>{g.error("密码错误，请核对后重试")});if(r.code!=="200")g.error(r.msg);else{i.set(d.TOKEN_NAME,r.data);const o=await R(e.value.username);i.set(d.USER_NAME,e.value.username),b().setUser(o.data);const l=i.get(d.REDIRECT_ROUTE_NAME);v.push({path:l||"/chat"})}};return(r,o)=>{const l=U,p=N,w=h,E=x;return F(),B("div",q,[o[3]||(o[3]=s("div",{class:"login-logo"},[s("img",{src:M})],-1)),s("div",A,[o[2]||(o[2]=s("div",{class:"login-box-top"},[s("div",{class:"login-box-text"},"欢迎登陆"),s("div",{class:"login-box-welcome"},"自然资源行业“后土”大模型")],-1)),t(E,{ref_key:"messageForm",ref:c,model:a(e),name:"normal_login",class:"login-form"},{default:n(()=>[t(p,{name:"username",rules:[{required:!0,message:"请输入用户名!"}]},{default:n(()=>[t(l,{id:"username",value:a(e).username,"onUpdate:value":o[0]||(o[0]=u=>a(e).username=u),class:"commonInput inputLine",name:"username",size:"large",placeholder:"请输入用户名",onPressEnter:m},null,8,["value"])]),_:1}),t(p,{name:"password",rules:[{required:!0,message:"请输入密码!"}]},{default:n(()=>[t(w,{id:"password",value:a(e).password,"onUpdate:value":o[1]||(o[1]=u=>a(e).password=u),class:"inputLine",name:"password",size:"large",placeholder:"请输入密码",onPressEnter:m},null,8,["value"])]),_:1}),t(p,{style:{"margin-bottom":"0px"}},{default:n(()=>[s("div",{class:"loginBtn",onClick:m},"登  录")]),_:1})]),_:1},8,["model"])])])}}},io=L(P,[["__scopeId","data-v-ad57a458"]]);export{io as default};
