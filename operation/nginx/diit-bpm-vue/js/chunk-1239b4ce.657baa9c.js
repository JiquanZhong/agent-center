(this["webpackJsonpMyLibrary"]=this["webpackJsonpMyLibrary"]||[]).push([["chunk-1239b4ce","chunk-67e08a0c","chunk-112c6452"],{1419:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("a-modal",{attrs:{title:t.title,visible:t.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(e){t.visible=e},ok:t.handleOk,cancel:t.handleCancel}},[e("a-form-model",{ref:"form",attrs:{model:t.formData,rules:t.rules,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20}}},[e("a-form-model-item",{attrs:{label:"文号名称",prop:"numericdefineName"}},[e("a-input",{model:{value:t.formData.numericdefineName,callback:function(e){t.$set(t.formData,"numericdefineName",e)},expression:"formData.numericdefineName"}})],1),e("a-form-model-item",{attrs:{label:"文号标识",prop:"flagName"}},[e("a-input",{model:{value:t.formData.flagName,callback:function(e){t.$set(t.formData,"flagName",e)},expression:"formData.flagName"}})],1),e("a-form-model-item",{attrs:{label:"文号格式",prop:"numericCode"}},[e("a-input",{staticStyle:{width:"calc(100% - 80px)"},model:{value:t.formData.numericCode,callback:function(e){t.$set(t.formData,"numericCode",e)},expression:"formData.numericCode"}}),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.EditFormat}},[t._v("编辑")])],1)],1)],1),e("EditSymbolFormat",{attrs:{numericCode:t.formData.numericCode,visible:t.editSymbolFormatVisible},on:{"update:visible":function(e){t.editSymbolFormatVisible=e},submit:t.setSymbolFormat}})],1)},n=[],o=r("bfcc"),i={name:"AddSymbolItem",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,default:"",required:!1}},data:function(){var t=this;return{formData:{id:"",numericdefineName:"",flagName:"",numericCode:"",referenceNumericId:""},editSymbolFormatVisible:!1,rules:{numericdefineName:[{required:!0,message:"请输入文号名称"}],flagName:[{validator:function(e,r,a){t.$bpmSystemProServices.systemService.validateNumberDefine({flagName:r,id:t.formData.id}).then((function(t){t?a(new Error("文号标识已存在")):a()}))},trigger:"blur"},{required:!0,message:"请输入文号标识"}],numericCode:[{required:!0,message:"请输入文号格式"}]}}},computed:{title:function(){var t="新增";return"edit"===this.type&&(t="编辑"),"".concat(t,"文号")}},watch:{visible:function(t){var e=this;t?this.$nextTick((function(){e.resetFormData(),"edit"===e.type&&(e.formData=Object.assign(e.formData,e.editData)),e.formData.referenceNumericId=e.editData.referenceNumericId})):this.resetFormData()}},methods:{resetFormData:function(){for(var t in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[t]=""},handleOk:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.$bpmSystemProServices.systemService.saveOrUpdateSymbolItem(t.formData).then((function(e){e?(t.$message.success("保存成功"),t.$emit("submit",t.formData.id)):t.$message.error("保存失败"),t.$emit("update:visible",!1)}))}))},handleCancel:function(){this.$emit("update:visible",!1)},EditFormat:function(){this.editSymbolFormatVisible=!0},setSymbolFormat:function(t){this.formData.numericCode=t}},components:{EditSymbolFormat:o["default"]}},s=i,c=r("2877"),l=Object(c["a"])(s,a,n,!1,null,null,null);e["default"]=l.exports},"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("d3b7");function a(t,e,r,a,n,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(a,n)}function n(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){a(i,n,o,s,c,"next",t)}function c(t){a(i,n,o,s,c,"throw",t)}s(void 0)}))}}},"1ffa":function(t,e,r){},"3f53":function(t,e,r){"use strict";r("1ffa")},bfcc:function(t,e,r){"use strict";r.r(e);r("b0c0");var a=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:"文号格式",visible:t.visible,centered:""},on:{"update:visible":function(e){t.visible=e},cancel:t.handleCancel}},[e("a-form-model",{ref:"form",attrs:{model:t.formData,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:18}}},[e("div",{staticClass:"btn-container"},[e("a-button",{staticClass:"operate-btn",on:{click:t.setSymbolFormat}},[e("icon-font",{attrs:{type:"iconfont-save"}}),t._v("保存")],1)],1),e("div",{staticClass:"tab-container"},[e("a-tabs",{attrs:{"default-active-key":"str"},model:{value:t.activeTabName,callback:function(e){t.activeTabName=e},expression:"activeTabName"}},[e("a-tab-pane",{key:"str",attrs:{tab:"添加字符"}},[e("a-form-model-item",{attrs:{label:"请输入字符","label-col":{span:4},"wrapper-col":{span:20},prop:"character"}},[e("a-input",{model:{value:t.formData.character,callback:function(e){t.$set(t.formData,"character",e)},expression:"formData.character"}})],1)],1),e("a-tab-pane",{key:"counter",attrs:{tab:"添加计数器"}},[e("a-form-model-item",{attrs:{label:"选择计数器","label-col":{span:4},"wrapper-col":{span:20},prop:"counterType"}},[e("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","option-filter-prop":"children","filter-option":t.filterOption},model:{value:t.formData.counterType,callback:function(e){t.$set(t.formData,"counterType",e)},expression:"formData.counterType"}},t._l(t.counters,(function(r){return e("a-select-option",{key:r.counterNumeric,attrs:{value:r.counterNumeric}},[t._v(" "+t._s(r.counterName)+" ")])})),1)],1),e("a-form-model-item",{attrs:{label:"补零规则","label-col":{span:4},"wrapper-col":{span:20},prop:"counterRule"}},[e("a-radio-group",{model:{value:t.formData.counterRule,callback:function(e){t.$set(t.formData,"counterRule",e)},expression:"formData.counterRule"}},t._l(t.counterRule,(function(r){return e("a-radio",{key:r.code,attrs:{value:r.code}},[t._v(" "+t._s(r.name)+" ")])})),1)],1),e("a-form-model-item",{attrs:{label:"最大长度","label-col":{span:4},"wrapper-col":{span:20},prop:"counterLength"}},[e("a-input-number",{attrs:{min:1,max:9},model:{value:t.formData.counterLength,callback:function(e){t.$set(t.formData,"counterLength",e)},expression:"formData.counterLength"}})],1)],1),e("a-tab-pane",{key:"date",attrs:{tab:"添加日期"}},[e("a-form-model-item",{attrs:{label:"日期规则","label-col":{span:4},"wrapper-col":{span:20},prop:"dateRule"}},[e("a-select",{staticStyle:{width:"100%"},model:{value:t.formData.dateRule,callback:function(e){t.$set(t.formData,"dateRule",e)},expression:"formData.dateRule"}},t._l(t.dateRule,(function(r){return e("a-select-option",{key:r.id,attrs:{value:r.code}},[t._v(" "+t._s(r.name)+" ")])})),1)],1),e("a-form-model-item",{attrs:{label:"日期长度","label-col":{span:4},"wrapper-col":{span:20},prop:"dateLength"}},[e("a-radio-group",{attrs:{"default-value":4},model:{value:t.formData.dateLength,callback:function(e){t.$set(t.formData,"dateLength",e)},expression:"formData.dateLength"}},t._l(t.dateLength,(function(r){return e("a-radio",{key:r.code,attrs:{value:r.code}},[t._v(" "+t._s(r.name)+" ")])})),1)],1)],1)],1)],1),e("a-form-model-item",{attrs:{label:"文号格式","label-col":{span:4},"wrapper-col":{span:20},prop:"symbolFormat"}},[e("a-input",{staticStyle:{width:"calc(100% - 125px)"},attrs:{disabled:"disabled"},model:{value:t.formData.symbolFormat,callback:function(e){t.$set(t.formData,"symbolFormat",e)},expression:"formData.symbolFormat"}}),e("a-button",{staticStyle:{"margin-left":"8px","margin-right":"8px"},on:{click:t.clearSymbol}},[t._v("清除")]),e("a-button",{attrs:{type:"primary"},on:{click:t.previewSymbol}},[t._v("预览")])],1)],1),e("template",{slot:"footer"},[e("a-button",{attrs:{type:"default"},on:{click:t.handleCancel}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("确定")])],1)],2)},n=[],o=r("5530"),i=r("c7eb"),s=r("1da1"),c=(r("d81d"),r("d3b7"),r("4d63"),r("ac1f"),r("25f0"),r("5319"),{name:"EditSymbolFormat",props:{visible:{type:Boolean,default:!1,required:!0},numericCode:{type:String,default:"",required:!1}},data:function(){return{formData:{symbolFormat:"",character:"",counterType:"",counterRule:"",counterLength:"",dateRule:"",dateLength:""},dateRule:[],dateLength:[],counterRule:[],activeTabName:"str",symbolFormatResult:"",counters:[],tempstr:""}},created:function(){this.getCounters(),this.getDateRule(),this.getDateLength(),this.getCounterRule()},watch:{visible:function(t){var e=this;t?this.$nextTick((function(){e.resetFormData(),e.numericCode&&(e.formData.symbolFormat=e.numericCode,e.updateDateTab(),e.updateNumTab())})):this.resetFormData()}},methods:{getCounters:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$bpmSystemProServices.systemService.getCounterListForSymbol();case 2:r=e.sent,t.counters=r;case 4:case"end":return e.stop()}}),e)})))()},getType:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$bpmSystemProServices.systemService.getDictByCode("ZYLX");case 2:r=e.sent,t.zylx=r.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{code:parseInt(t.code)})}));case 4:case"end":return e.stop()}}),e)})))()},getDateRule:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$bpmSystemProServices.systemService.getDictByCode("RQGZ");case 2:r=e.sent,t.dateRule=r;case 4:case"end":return e.stop()}}),e)})))()},getDateLength:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$bpmSystemProServices.systemService.getDictByCode("RQCD");case 2:r=e.sent,t.dateLength=r;case 4:case"end":return e.stop()}}),e)})))()},getCounterRule:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$bpmSystemProServices.systemService.getDictByCode("BLGZ");case 2:r=e.sent,t.counterRule=r;case 4:case"end":return e.stop()}}),e)})))()},resetFormData:function(){for(var t in this.formData)this.formData[t]=""},handleOk:function(){this.$message.success("设置成功"),this.$emit("update:visible",!1),this.$emit("submit",this.formData.symbolFormat)},handleCancel:function(){this.$emit("update:visible",!1)},setSymbolFormat:function(){if("str"===this.activeTabName){if(!this.formData.character)return this.$message.warning("请输入要添加的字符"),!1;this.symbolFormatResult+=this.formData.character}else"counter"===this.activeTabName?this.formData.counterType?this.formData.counterRule?this.formData.counterLength?"B"===this.formData.counterRule?(this.symbolFormatResult+="%",this.symbolFormatResult+=this.formData.counterRule,this.symbolFormatResult+=this.formData.counterLength,this.symbolFormatResult+="[&",this.symbolFormatResult+=this.formData.counterType,this.symbolFormatResult+="]"):(this.symbolFormatResult+="%",this.symbolFormatResult+=this.formData.counterLength,this.symbolFormatResult+="[&",this.symbolFormatResult+=this.formData.counterType,this.symbolFormatResult+="]"):this.$message.warning("请选择计数器最大长度"):this.$message.warning("请选择补零规则"):this.$message.warning("请选择具体计数器"):"date"===this.activeTabName&&(this.formData.dateRule?this.formData.dateLength?(this.symbolFormatResult+="%",this.symbolFormatResult+=this.formData.dateLength,this.symbolFormatResult+=this.formData.dateRule):this.$message.warning("请选择日期长度"):this.$message.warning("请选择日期规则"));this.formData.symbolFormat=this.symbolFormatResult},clearSymbol:function(){this.formData.symbolFormat="",this.symbolFormatResult="",this.$refs.form.resetFields()},updateDateTab:function(){this.tempstr=new RegExp("%[2-4][YMD]").exec(this.numericCode),this.tempstr&&this.tempstr.length>0&&(this.tempstr=this.tempstr[0].replace("%",""),this.formData.dateLength=this.tempstr.charAt(0),this.formData.dateRule=this.tempstr.charAt(1))},updateNumTab:function(){this.tempstr=/%[1-9]\[&[0-9a-z]{8}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{12}]/,this.tempstr=this.tempstr.exec(this.numericCode),this.tempstr&&this.tempstr.length>0?(this.formData.counterLength=this.tempstr[0].charAt(1),this.formData.counterRule="Y",this.formData.counterType=this.tempstr[0].split("&")[1].split("]")[0]):(this.tempstr=/%[B][1-9]\[&[0-9a-z]{8}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{12}]/,this.tempstr=this.tempstr.exec(this.numericCode),this.formData.counterLength=this.tempstr[0].charAt(2),this.formData.counterRule="B",this.formData.counterType=this.tempstr[0].split("&")[1].split("]")[0])},previewSymbol:function(){var t=this;this.formData.symbolFormat?this.$bpmSystemProServices.systemService.previewSymbol({numberCode:this.formData.symbolFormat}).then((function(e){t.$message.info(e)})):this.$message.warning("请先设置文号格式")},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}}}),l=c,u=(r("3f53"),r("2877")),m=Object(u["a"])(l,a,n,!1,null,"d9b05468",null);e["default"]=m.exports},c7eb:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a4d3"),r("e01a"),r("b636"),r("d28b"),r("944a"),r("fb6a"),r("b0c0"),r("0c47"),r("23dc"),r("3410"),r("131a"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0");var a=r("53ca");function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
n=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function m(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{m({},"")}catch(t){m=function(t,e,r){return t[e]=r}}function f(t,e,r,a){var n=e&&e.prototype instanceof g?e:g,o=Object.create(n.prototype),s=new j(a||[]);return i(o,"_invoke",{value:O(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p="suspendedStart",d="suspendedYield",b="executing",y="completed",v={};function g(){}function D(){}function w(){}var x={};m(x,c,(function(){return this}));var L=Object.getPrototypeOf,S=L&&L(L(C([])));S&&S!==r&&o.call(S,c)&&(x=S);var F=w.prototype=g.prototype=Object.create(x);function k(t){["next","throw","return"].forEach((function(e){m(t,e,(function(t){return this._invoke(e,t)}))}))}function R(t,e){function r(n,i,s,c){var l=h(t[n],t,i);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==Object(a["a"])(m)&&o.call(m,"__await")?e.resolve(m.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(m).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,c)}))}c(l.arg)}var n;i(this,"_invoke",{value:function(t,a){function o(){return new e((function(e,n){r(t,a,e,n)}))}return n=n?n.then(o,o):o()}})}function O(e,r,a){var n=p;return function(o,i){if(n===b)throw Error("Generator is already running");if(n===y){if("throw"===o)throw i;return{value:t,done:!0}}for(a.method=o,a.arg=i;;){var s=a.delegate;if(s){var c=$(s,a);if(c){if(c===v)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===p)throw n=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=b;var l=h(e,r,a);if("normal"===l.type){if(n=a.done?y:d,l.arg===v)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(n=y,a.method="throw",a.arg=l.arg)}}}function $(e,r){var a=r.method,n=e.iterator[a];if(n===t)return r.delegate=null,"throw"===a&&e.iterator["return"]&&(r.method="return",r.arg=t,$(e,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),v;var o=h(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Object(a["a"])(e)+" is not iterable")}return D.prototype=w,i(F,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:D,configurable:!0}),D.displayName=m(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===D||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,m(t,u,"GeneratorFunction")),t.prototype=Object.create(F),t},e.awrap=function(t){return{__await:t}},k(R.prototype),m(R.prototype,l,(function(){return this})),e.AsyncIterator=R,e.async=function(t,r,a,n,o){void 0===o&&(o=Promise);var i=new R(f(t,r,a,n),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(F),m(F,u,"Generator"),m(F,c,(function(){return this})),m(F,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var a in e)r.push(a);return r.reverse(),function t(){for(;r.length;){var a=r.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},e.values=C,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(a,n){return s.type="throw",s.arg=e,r.next=a,n&&(r.method="next",r.arg=t),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var i=n?n.completion:{};return i.type=t,i.arg=e,n?(this.method="next",this.next=n.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;_(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,a){return this.delegate={iterator:C(e),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=t),v}},e}}}]);