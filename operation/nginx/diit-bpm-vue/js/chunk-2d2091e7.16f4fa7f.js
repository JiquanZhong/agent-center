(this["webpackJsonpMyLibrary"]=this["webpackJsonpMyLibrary"]||[]).push([["chunk-2d2091e7"],{a860:function(e,t,a){"use strict";a.r(t);a("4e82"),a("b0c0");var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,rules:e.rules,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20}}},[t("a-form-model-item",{attrs:{label:"父级字典",prop:"pid"}},[t("a-tree-select",{attrs:{showSearch:!0,treeData:e.allDic,treeNodeFilterProp:"title",replaceFields:e.replaceFields,"dropdown-style":{maxHeight:"400px",overflow:"auto"},allowClear:!0},model:{value:e.formData.pid,callback:function(t){e.$set(e.formData,"pid",t)},expression:"formData.pid"}})],1),t("a-form-model-item",{attrs:{label:"代码",prop:"code"}},[t("a-input",{model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1),t("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[t("a-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),t("a-form-model-item",{attrs:{label:"顺序",prop:"sort"}},[t("a-input-number",{model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1),t("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[t("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:5}},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)},i=[],o={name:"AddDictItem",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,required:!1,default:""},allDic:{type:Array,required:!1,default:function(){return[]}}},data:function(){var e=this;return{formData:{pid:"",dicId:"",id:"",sort:"",code:"",name:"",remark:""},rules:{code:[{validator:function(t,a,r){e.$bpmSystemProServices.systemService.validateDictItemCode({code:a,id:e.formData.id,dicId:e.formData.dicId}).then((function(e){0!==e&&"0"!==e?r(new Error("请输入唯一标识")):r()}))},trigger:"blur"},{required:!0,message:"请输入唯一标识"}],name:[{required:!0,message:"请输入字典项名称"}],sort:[{required:!0,message:"请输入顺序号"}]}}},computed:{title:function(){var e="新增";return"edit"===this.type&&(e="编辑"),"".concat(e,"字典项")},replaceFields:function(){return{children:"children",title:"name",key:"id",value:"id"}}},watch:{visible:function(e){var t=this;e?(this.resetFormData(),this.$nextTick((function(){t.formData=Object.assign(t.formData,t.editData)}))):this.resetFormData()}},methods:{resetFormData:function(){for(var e in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[e]=""},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.handleSubmit()}))},handleSubmit:function(){var e=this;this.formData.pid=this.formData.pid||"",this.$bpmSystemProServices.systemService.saveOrUpdateDictItem(this.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.id)):e.$message.error("保存失败"),e.$emit("update:visible",!1)}))},handleCancel:function(){this.$emit("update:visible",!1)}}},s=o,l=a("2877"),n=Object(l["a"])(s,r,i,!1,null,null,null);t["default"]=n.exports}}]);