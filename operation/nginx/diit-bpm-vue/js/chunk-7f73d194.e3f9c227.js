(this["webpackJsonpMyLibrary"]=this["webpackJsonpMyLibrary"]||[]).push([["chunk-7f73d194","chunk-112c9d34","chunk-2d216ba7"],{"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("d3b7");function r(t,e,a,r,n,o,i){try{var s=t[o](i),c=s.value}catch(t){return void a(t)}s.done?e(c):Promise.resolve(c).then(r,n)}function n(t){return function(){var e=this,a=arguments;return new Promise((function(n,o){var i=t.apply(e,a);function s(t){r(i,n,o,s,c,"next",t)}function c(t){r(i,n,o,s,c,"throw",t)}s(void 0)}))}}},"70c1":function(t,e,a){"use strict";a.r(e);a("b0c0");var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,visible:t.visible,okText:"确定",cancelText:"取消",centered:"",confirmLoading:t.spinning,width:"50%"},on:{"update:visible":function(e){t.visible=e},ok:t.handleOk,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.spinning}},[e("a-form-model",{ref:"form",attrs:{model:t.formData,rules:t.rules,layout:"horizontal","label-col":{span:8},"wrapper-col":{span:16}}},[e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"账号名",prop:"loginName"}},[e("a-input",{model:{value:t.formData.loginName,callback:function(e){t.$set(t.formData,"loginName",e)},expression:"formData.loginName"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"真实姓名",prop:"name"}},[e("a-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1)],1),e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"性别",prop:"sex"}},[e("a-select",{model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},t._l(t.gender,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.code}},[t._v(" "+t._s(a.name)+" ")])})),1)],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"出生日期",prop:"bornDate"}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD"},model:{value:t.formData.bornDate,callback:function(e){t.$set(t.formData,"bornDate",e)},expression:"formData.bornDate"}})],1)],1)],1),e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"座机电话",prop:"tel"}},[e("a-input",{model:{value:t.formData.tel,callback:function(e){t.$set(t.formData,"tel",e)},expression:"formData.tel"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"移动电话",prop:"phone"}},[e("a-input",{model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1)],1)],1),e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"用户邮箱",prop:"email"}},[e("a-input",{model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"用户状态",prop:"status"}},[e("a-select",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},t._l(t.persStatus,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.code}},[t._v(" "+t._s(a.name)+" ")])})),1)],1)],1)],1),e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"职务",prop:"zw"}},[e("a-select",{model:{value:t.formData.zw,callback:function(e){t.$set(t.formData,"zw",e)},expression:"formData.zw"}},[e("a-select-option",{attrs:{value:""}},[t._v("无")]),t._l(t.zw,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.code}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"职级",prop:"zj"}},[e("a-select",{model:{value:t.formData.zj,callback:function(e){t.$set(t.formData,"zj",e)},expression:"formData.zj"}},[e("a-select-option",{attrs:{value:""}},[t._v("无")]),t._l(t.zj,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.code}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1)],1)],1),e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"签名",prop:"remark","label-col":{span:8},"wrapper-col":{span:16}}},[t.formData.id?t._e():e("span",{staticStyle:{color:"red","margin-right":"10px"}},[t._v("请先保存人员信息再上传签名!")]),t.formData.signFspath?e("img",{staticStyle:{height:"32px","margin-right":"15px"},attrs:{alt:"",src:t.imgUrl}}):t._e(),e("a-button",{attrs:{disabled:!t.formData.id,type:"primary"},on:{click:t.uploadQm}},[t._v("上传")])],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"头像",prop:"remark","label-col":{span:8},"wrapper-col":{span:16}}},[t.formData.id?t._e():e("span",{staticStyle:{color:"red","margin-right":"10px"}},[t._v("请先保存人员信息再上传头像!")]),t.formData.signFspath?e("img",{staticStyle:{height:"32px","margin-right":"15px"},attrs:{alt:"",src:""}}):t._e(),e("a-button",{attrs:{disabled:!t.formData.id,type:"primary"},on:{click:t.uploadQm}},[t._v("上传")])],1)],1)],1),e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"备注",prop:"remark","label-col":{span:4},"wrapper-col":{span:20}}},[e("a-textarea",{attrs:{placeholder:"备注","auto-size":{minRows:3,maxRows:5}},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)],1)],1)],1)],1)},n=[],o=a("c14f"),i=a("1da1");a("99af");function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=a("a38e");function u(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Object(c["a"])(r.key),r)}}function l(t,e,a){return e&&u(t.prototype,e),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}a("a9e3"),a("ac1f");var f=function(){function t(){s(this,t)}return l(t,null,[{key:"validateIDCard",value:function(t){var e=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return e.test(t)}},{key:"validateEmail",value:function(t){var e=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/;return e.test(t)}},{key:"validateZipCode",value:function(t){var e=/^[0-9]{6}$/;return e.test(t)}},{key:"validatePhoneNum",value:function(t){var e=/^((0\d{2,3}-\d{7,8})|(\d{7,8})|(1[35784]\d{9}))$/;return e.test(t)}},{key:"validateFixedPhoneAreaCode",value:function(t){var e=/^((0\d{2,3}-\d{7,8}(-\d{3,})?)|(\d{7,8}(-\d{3,})?))$/;return e.test(t)}},{key:"validateFixedPhoneExtension",value:function(t){var e=/^((0\d{2,3}-\d{7,8}(-\d{3,})?)|(\d{7,8}(-\d{3,})?))$/;return e.test(t)}},{key:"validateAreaCode",value:function(t){var e=/^0\d{2,3}$/;return e.test(t)}},{key:"validateFixedPhone",value:function(t){var e=/^(\d{7,8})$/;return e.test(t)}},{key:"validateMobilePhone",value:function(t){var e=/^1\d{10}$/;return e.test(t)}},{key:"validatePassword",value:function(t){var e=/^(\w){8,16}$/;return e.test(t)}},{key:"validateUsername",value:function(t){var e=/^[a-zA-Z0-9]{2,30}$/;return e.test(t)}},{key:"validateSocialCode",value:function(t){var e=/^(11|12|13|19|51|52|53|59|91|92|93|Y1)\d{6}\w{9}\w$/;return e.test(t)}},{key:"validateNeqZero",value:function(t){return isNaN(t)||0===Number(t)}},{key:"validateGtZero",value:function(t){return isNaN(t)||Number(t)<=0}},{key:"validateGteZero",value:function(t){return isNaN(t)||Number(t)<0}},{key:"validateLtZero",value:function(t){return isNaN(t)||Number(t)>=0}},{key:"validateLteZero",value:function(t){return isNaN(t)||Number(t)>0}}])}(),m=f,d=a("c466"),p=a("bc3a"),v=a.n(p),b={name:"AddPers",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,default:"",required:!1}},created:function(){this.getPersStatus(),this.getZw(),this.getZj(),this.getSf(),this.getGender()},data:function(){var t=this;return{persStatus:[],sf:[],zw:[],gender:[],zj:[],spinning:!1,formData:{departmentId:"",password:"",id:"",name:"",sex:"",tel:"",phone:"",loginName:"",status:"",zw:"",sffzr:"",cjgzsj:"",rzsj:"",sx:"",signFpath:"",signFspath:"",remark:"",zj:"",bornDate:"",email:"",createTime:""},rules:{loginName:[{validator:function(e,a,r){t.formData.id?r():t.$bpmSystemProServices.persService.validateLoginName({loginName:a,id:t.formData.id}).then((function(t){0!==t&&"0"!==t?r(new Error("账号已存在")):r()}))},trigger:"blur"},{required:!0,message:"请输入账号"}],sffzr:[{validator:function(e,a,r){"1"===a?t.$bpmSystemProServices.persService.validateManager({departmentId:t.formData.departmentId}).then((function(t){t>0?r(new Error("该部门负责人已存在")):r()})):r()}}],name:[{required:!0,message:"请输入姓名"}],phone:[{validator:function(t,e,a){var r=m.validateMobilePhone(e);r||""===e?a():a(new Error("请输入11位手机号码"))}}],cjgzsj:[{required:!1,message:"请输入参加工作时间"}],status:[{required:!0,message:"请选择员工状态"}]}}},watch:{visible:function(t){var e=this;t?this.$nextTick((function(){e.resetFormData(),e.formData=Object.assign(e.formData,e.editData),"edit"!==e.type&&(e.formData.password="000000",e.formData.createTime=d["a"].getNowFormatDateTime(),e.formData.status=e.persStatus[0].code)})):(this.resetFormData(),this.spinning=!1)}},computed:{title:function(){var t="新增";return"edit"===this.type&&(t="编辑"),"".concat(t,"人员")},imgUrl:function(){return"".concat(window.location.origin,"/").concat(window.ServiceConfig.fileUrl,"/").concat(this.formData.signFspath)}},methods:{uploadQm:function(){var t=this,e=document.createElement("input");e.type="file",e.accept="image/gif, image/jpeg, image/png",e.addEventListener("change",(function(){var a=e.files[0],r=new FormData;r.append("file",a),r.append("uploadClassify",""),r.append("uploadType","userSign");var n={userId:t.formData.id};r.append("param",JSON.stringify(n)),v()({method:"POST",headers:{"content-type":"multipart/form-data"},data:r,processData:!1,url:window.location.origin+"/diit-project/upload/uploadFile"}).then((function(e){t.getformInfo(),t.$message.success("上传成功")})).catch((function(e){t.$message.error("上传失败")}))})),e.click()},getformInfo:function(){var t=this;return Object(i["a"])(Object(o["a"])().m((function e(){return Object(o["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.persService.getUserInfo({id:t.formData.id}).then((function(e){e.signFspath&&(t.formData=e)}));case 1:return e.a(2)}}),e)})))()},getPersStatus:function(){var t=this;return Object(i["a"])(Object(o["a"])().m((function e(){var a;return Object(o["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getDictByCode("YHZT");case 1:a=e.v,t.persStatus=a;case 2:return e.a(2)}}),e)})))()},getZw:function(){var t=this;return Object(i["a"])(Object(o["a"])().m((function e(){var a;return Object(o["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getDictByCode("ZW");case 1:a=e.v,t.zw=a;case 2:return e.a(2)}}),e)})))()},getZj:function(){var t=this;return Object(i["a"])(Object(o["a"])().m((function e(){var a;return Object(o["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getDictByCode("ZJ");case 1:a=e.v,t.zj=a;case 2:return e.a(2)}}),e)})))()},getSf:function(){var t=this;return Object(i["a"])(Object(o["a"])().m((function e(){var a;return Object(o["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getDictByCode("SF");case 1:a=e.v,t.sf=a;case 2:return e.a(2)}}),e)})))()},getGender:function(){var t=this;return Object(i["a"])(Object(o["a"])().m((function e(){var a;return Object(o["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getDictByCode("SEX");case 1:a=e.v,t.gender=a;case 2:return e.a(2)}}),e)})))()},resetFormData:function(){for(var t in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[t]=""},handleOk:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.handleSubmit()}))},handleSubmit:function(){var t=this,e={};this.spinning=!0,"edit"===this.type?(e=this.formData,this.$bpmSystemProServices.persService.updatePers(e).then((function(e){e?(t.$message.success("保存成功"),t.$emit("submit",t.formData.id),t.$emit("update:visible",!1)):t.$message.error("保存失败")}))):(e.user=this.formData,this.$bpmSystemProServices.persService.commonPostRequest("/user/insert3",e).then((function(e){e?(t.$message.success("保存成功"),t.$emit("submit",t.formData.id),t.$emit("update:visible",!1)):t.$message.error("保存失败")})))},handleCancel:function(){this.$emit("update:visible",!1)}}},h=b,g=a("2877"),y=Object(g["a"])(h,r,n,!1,null,null,null);e["default"]=y.exports},c14f:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("a4d3"),a("e01a"),a("3410"),a("131a"),a("d3b7");function r(t,e,a,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}r=function(t,e,a,n){if(e)o?o(t,e,{value:a,enumerable:!n,configurable:!n,writable:!n}):t[e]=a;else{var i=function(e,a){r(t,e,(function(t){return this._invoke(e,a,t)}))};i("next",0),i("throw",1),i("return",2)}},r(t,e,a,n)}function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var t,e,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function s(a,n,o,i){var s=n&&n.prototype instanceof u?n:u,l=Object.create(s.prototype);return r(l,"_invoke",function(a,r,n){var o,i,s,u=0,l=n||[],f=!1,m={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,a){return o=e,i=0,s=t,m.n=a,c}};function d(a,r){for(i=a,s=r,e=0;!f&&u&&!n&&e<l.length;e++){var n,o=l[e],d=m.p,p=o[2];a>3?(n=p===r)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((n=a<2&&d<o[1])?(i=0,m.v=r,m.n=o[1]):d<p&&(n=a<3||o[0]>r||r>p)&&(o[4]=a,o[5]=r,m.n=p,i=0))}if(n||a>1)return c;throw f=!0,r}return function(n,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,p),i=l,s=p;(e=i<2?t:s)||!f;){o||(i?i<3?(i>1&&(m.n=-1),d(i,s)):m.n=s:m.v=s);try{if(u=2,o){if(i||(n="next"),e=o[n]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=o["return"])&&e.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),i=1);o=t}else if((e=(f=m.n<0)?s:a.call(r,m))!==c)break}catch(e){o=t,i=1,s=e}finally{u=1}}return{value:e,done:f}}}(a,o,i),!0),l}var c={};function u(){}function l(){}function f(){}e=Object.getPrototypeOf;var m=[][o]?e(e([][o]())):(r(e={},o,(function(){return this})),e),d=f.prototype=u.prototype=Object.create(m);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,r(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=f,r(d,"constructor",f),r(f,"constructor",l),l.displayName="GeneratorFunction",r(f,i,"GeneratorFunction"),r(d),r(d,i,"Generator"),r(d,o,(function(){return this})),r(d,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m:p}})()}},c466:function(t,e,a){"use strict";var r=a("c1df"),n=a.n(r),o={getNowFormatDateTime:function(){var t=n()();return t.format("YYYY-MM-DD HH:mm:ss")},getNowFormatDate:function(){var t=n()();return t.format("YYYY-MM-DD")},getNowFormatTime:function(){var t=n()();return t.format("HH:mm:ss")},formatDate:function(t,e){var a=n()(t);return a.isValid()?a.format(e):t},getYear:function(t){var e=n()(t);return e.isValid()?e.year():""},getQuarter:function(t){var e=n()(t);return e.isValid()?e.quarter():""},getMonth:function(t){var e=n()(t);return e.isValid()?e.month()+1:""},addDays:function(t,e){return n()(e).add(t,"days")},addMonths:function(t,e){return n()(e).add(t,"months")},addQuarter:function(t,e){return n()(e).add(t,"quarters")},addYears:function(t,e){return n()(e).add(t,"years")},subtractDays:function(t,e){return n()(e).subtract(t,"days")},subtractMonths:function(t,e){return n()(e).subtract(t,"months")},subtractQuarter:function(t,e){return n()(e).subtract(t,"quarters")},subtractYears:function(t,e){return n()(e).subtract(t,"years")},getDays:function(t,e){var a=n()(t),r=n()(e);return Math.abs(a.diff(r,"days"))},getYearsByDistance:function(t,e){for(var a=new Date,r=a.getFullYear(),n=[],o=r+e;o>=r-t;o--)n.push({id:o,text:o});return n},dateToTime:function(t){return n()(t).valueOf()/1e3},timeToDate:function(t){return n.a.unix(t)}};e["a"]=o}}]);