(this["webpackJsonpMyLibrary"]=this["webpackJsonpMyLibrary"]||[]).push([["chunk-e7ee3dc2","chunk-63e5fc68","chunk-5d821e7f","chunk-2d20ebc4","chunk-2d2091e7"],{"1a1a":function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,visible:t.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(e){t.visible=e},ok:t.handleOk,cancel:t.handleCancel}},[e("a-form-model",{ref:"form",attrs:{model:t.formData,rules:t.rules,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20}}},[e("a-form-model-item",{attrs:{label:"类别",prop:"typeId"}},[e("a-select",{staticStyle:{width:"200px","margin-right":"16px"},model:{value:t.formData.typeId,callback:function(e){t.$set(t.formData,"typeId",e)},expression:"formData.typeId"}},t._l(t.categories,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])})),1),e("a-button",{attrs:{type:"primary"},on:{click:t.openCategories}},[t._v(" 类别管理 ")])],1),e("a-form-model-item",{attrs:{label:"代码",prop:"code"}},[e("a-input",{model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),e("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[e("a-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),e("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[e("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:5}},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1),e("CategoriesList",{attrs:{visible:t.categoriesVisible},on:{"update:visible":function(e){t.categoriesVisible=e}}})],1)},r=[],n=a("c14f"),s=a("1da1"),o=(a("4de4"),a("d3b7"),a("2930")),c={name:"AddDict",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,required:!1,default:""}},created:function(){this.getCategories()},data:function(){var t=this;return{categoriesVisible:!1,categories:[],formData:{id:"",typeId:"",code:"",name:"",remark:""},rules:{code:[{validator:function(e,a,i){t.$bpmSystemProServices.systemService.validateDictCode({code:a,id:t.formData.id}).then((function(t){0!==t&&"0"!==t?i(new Error("请输入唯一标识")):i()}))},trigger:"blur"},{required:!0,message:"请输入唯一标识"}],name:[{required:!0,message:"请输入字典名称"}],typeId:[{required:!0,message:"请选择类别"}]}}},computed:{title:function(){var t="新增";return"edit"===this.type&&(t="编辑"),"".concat(t,"字典")}},watch:{visible:function(t){var e=this;t?this.$nextTick((function(){e.getCategories(),e.resetFormData(),"edit"===e.type&&(e.formData=Object.assign(e.formData,e.editData))})):this.resetFormData()},categoriesVisible:function(t){t||this.getCategories()}},methods:{getCategories:function(){var t=this;return Object(s["a"])(Object(n["a"])().m((function e(){var a;return Object(n["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getCategoriesList();case 1:a=e.v,t.categories=a;case 2:return e.a(2)}}),e)})))()},resetFormData:function(){for(var t in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[t]="";var e=this.categories.filter((function(t){return"业务字典"===t.name}));e.length>0&&(this.formData.typeId=e[0].id)},handleOk:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.handleSubmit()}))},handleSubmit:function(){var t=this;this.$bpmSystemProServices.systemService.saveOrUpdateDict(this.formData).then((function(e){e?(t.$message.success("保存成功"),t.$emit("submit",t.formData.id)):t.$message.error("保存失败"),t.$emit("update:visible",!1)}))},handleCancel:function(){this.$emit("update:visible",!1)},openCategories:function(){this.categoriesVisible=!0}},components:{CategoriesList:o["default"]}},l=c,d=a("2877"),m=Object(d["a"])(l,i,r,!1,null,null,null);e["default"]=m.exports},2422:function(t,e,a){"use strict";a("a688")},2930:function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:"类别管理",visible:t.visible,centered:"",width:"700px",footer:null},on:{"update:visible":function(e){t.visible=e},cancel:t.handleCancel}},[e("SystemList",{ref:"categoriesList",attrs:{columns:t.categoryColumns,render:t.$bpmSystemProServices.systemService.getCategoriesList,params:t.categoryParams,buttons:t.categoryButtons,operations:t.operations}},[e("template",{slot:"search-box"},[e("a-form",{attrs:{layout:"inline"}},[e("a-form-item",[e("a-input-search",{attrs:{placeholder:"请输入类别名称","enter-button":""},on:{search:t.onSearch},model:{value:t.categoryParams.name,callback:function(e){t.$set(t.categoryParams,"name",e)},expression:"categoryParams.name"}})],1)],1)],1)],2),e("AddCategory",{attrs:{visible:t.addVisible,editData:t.editData,type:t.openType},on:{"update:visible":function(e){t.addVisible=e},"update:editData":function(e){t.editData=e},"update:edit-data":function(e){t.editData=e},submit:t.onCategorySubmit}})],1)},r=[],n=a("c14f"),s=a("1da1"),o=(a("d3b7"),a("d8b8")),c=a("b143"),l={name:"Categories",props:{visible:{type:Boolean,default:!1,required:!0}},data:function(){var t=this;return{categoryParams:{name:""},categoryColumns:[{title:"类别名称",dataIndex:"name",width:"60%",editable:!0},{title:"排序号",dataIndex:"sortNum",width:"20%",align:"center",editable:!0},{title:"操作",key:"action",width:"20%",align:"center",scopedSlots:{customRender:"action"}}],categoryButtons:[{id:1,text:"新增",icon:"iconfont-New",click:function(){t.editData={},t.openType="",t.addVisible=!0}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){t.editData=t.$refs.categoriesList.getSelected(),t.editData?(t.openType="edit",t.addVisible=!0):t.$message.warning("请选择一条记录！")}}],operations:[{name:"删除",click:function(e,a){t.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){t.$bpmSystemProServices.systemService.deleteCategory({id:e.id}).then((function(e){e?(t.$message.success("删除成功"),t.$refs.categoriesList.clearSelected(),t.onSearch()):t.$message.error("删除失败")}))},onCancel:function(){}})}}],openType:"",addVisible:!1,editData:{}}},methods:{onSearch:function(){var t=this;return Object(s["a"])(Object(n["a"])().m((function e(){return Object(n["a"])().w((function(e){while(1)switch(e.n){case 0:return e.a(2,new Promise(function(){var e=Object(s["a"])(Object(n["a"])().m((function e(a,i){return Object(n["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$refs.categoriesList.getListData();case 1:a();case 2:return e.a(2)}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))}}),e)})))()},handleCancel:function(){this.$emit("update:visible",!1)},onCategorySubmit:function(t){var e=this;return Object(s["a"])(Object(n["a"])().m((function a(){return Object(n["a"])().w((function(a){while(1)switch(a.n){case 0:return a.n=1,e.onSearch();case 1:t&&e.$refs.categoriesList.setSelectedRow(t);case 2:return a.a(2)}}),a)})))()}},components:{SystemList:o["a"],AddCategory:c["default"]}},d=l,m=a("2877"),u=Object(m["a"])(d,i,r,!1,null,null,null);e["default"]=u.exports},5124:function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dict-container"},[e("split-pane",{attrs:{"min-percent":30,"default-percent":60,split:"vertical"}},[e("template",{slot:"paneL"},[e("div",{staticClass:"dict-left"},[e("SystemList",{ref:"dictList",attrs:{title:"字典管理",columns:t.dictColumns,render:t.$bpmSystemProServices.systemService.getDictList,params:t.dictParams,scroll:{y:t.scrollY},buttons:t.dictButtons,defaultLoad:!1,pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e},change:t.onDictListChange,rowClick:t.onDictRowClick,rowDbClick:t.onDictRowDbClick}},[e("template",{slot:"search-box"},[e("a-form",{attrs:{layout:"inline"}},[e("a-form-item",{attrs:{label:"类别"}},[e("a-select",{staticStyle:{width:"120px"},on:{change:t.onSearch},model:{value:t.dictParams.typeId,callback:function(e){t.$set(t.dictParams,"typeId",e)},expression:"dictParams.typeId"}},[e("a-select-option",{key:"empty",attrs:{value:""}},[t._v(" 全部 ")]),t._l(t.dictCategories,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1),e("a-form-item",[e("a-input-search",{attrs:{placeholder:"请输入字典名称","enter-button":""},on:{search:t.onSearch},model:{value:t.dictParams.name,callback:function(e){t.$set(t.dictParams,"name",e)},expression:"dictParams.name"}})],1)],1)],1)],2)],1)]),e("template",{slot:"paneR"},[e("SystemList",{ref:"dictItemList",attrs:{title:"字典项",columns:t.dictItemColumns,buttons:t.dictItemButtons,render:t.$bpmSystemProServices.systemService.getDictItemList,params:t.dictItemParams,pagination:!1,defaultLoad:!1,showAsTree:!0},on:{rowClick:t.onDictItemRowClick,rowDbClick:t.onDictItemRowDbClick}})],1)],2),e("AddDict",{attrs:{visible:t.addVisible,editData:t.editData,type:t.openType},on:{"update:visible":function(e){t.addVisible=e},"update:editData":function(e){t.editData=e},"update:edit-data":function(e){t.editData=e},submit:t.onDictSubmit}}),e("AddDictItem",{attrs:{visible:t.addItemVisible,editData:t.editItemData,type:t.openItemType,allDic:t.allDic},on:{"update:visible":function(e){t.addItemVisible=e},"update:editData":function(e){t.editItemData=e},"update:edit-data":function(e){t.editItemData=e},submit:t.onDictItemSubmit}})],1)},r=[],n=a("c14f"),s=a("1da1"),o=(a("4de4"),a("d3b7"),a("19ab")),c=a.n(o),l=a("d8b8"),d=a("1a1a"),m=a("a860"),u={name:"Dict",created:function(){this.getCategories(),this.getScrollY()},data:function(){var t=this,e=this;return{scrollY:null,dictCategories:[],dictParams:{lbmc:"",name:"",sortField:"",sortOrder:"",typeId:""},pagination:{pageIndex:1,pageSize:20,total:0},dictItemParams:{dicId:""},allDic:[],dictColumns:[{title:"序号",customRender:function(t,e,a){return"".concat(a+1)},width:80,align:"center"},{title:"类别",dataIndex:"typeId",customRender:function(e){var a=t.dictCategories.filter((function(t){return t.id===e}));return a.length>0?a[0].name:""}},{title:"字典代码",dataIndex:"code",ellipsis:!0,sorter:!1},{title:"字典名称",dataIndex:"name",ellipsis:!0,sorter:!1}],dictButtons:[{id:1,text:"新增",icon:"iconfont-New",click:function(){e.editData={},e.openType="",e.addVisible=!0}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){e.editData=e.$refs.dictList.getSelected(),e.editData?(e.openType="edit",e.addVisible=!0):e.$message.warning("请选择一条记录！")}},{id:3,text:"删除",icon:"iconfont-Delete",click:function(){e.editData=e.$refs.dictList.getSelected(),e.editData?e.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){e.$bpmSystemProServices.systemService.deleteDict({id:e.editData.id}).then((function(t){t?(e.$message.success("删除成功"),e.$refs.dictList.clearSelected(),e.onSearch(),e.reloadDictItem()):e.$message.error("删除失败")}))},onCancel:function(){}}):e.$message.warning("请选择一条记录！")}}],dictItemColumns:[{title:"名称",dataIndex:"name",ellipsis:!0,align:"left",width:200},{title:"代码",dataIndex:"code",align:"center",width:100},{title:"顺序",dataIndex:"sort",align:"center",width:80}],dictItemButtons:[{id:1,text:"新增",icon:"iconfont-New",click:function(){e.editData=e.$refs.dictList.getSelected(),e.editItemData=e.$refs.dictItemList.getSelected(),e.editData?(e.editItemData={pid:e.editItemData&&e.editItemData.id||"",dicId:e.editData.id},e.allDic=e.$refs.dictItemList.getData(),e.openItemType="",e.addItemVisible=!0):e.$message.warning("请选择一个字典！")}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){e.editItemData=e.$refs.dictItemList.getSelected(),e.editItemData?(e.openItemType="edit",e.allDic=e.$refs.dictItemList.getData(),e.addItemVisible=!0):e.$message.warning("请选择一个字典项！")}},{id:3,text:"删除",icon:"iconfont-Delete",click:function(){e.editItemData=e.$refs.dictItemList.getSelected(),e.editItemData?e.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){e.$bpmSystemProServices.systemService.deleteDictItem({id:e.editItemData.id}).then((function(){e.$refs.dictItemList.clearSelected(),e.reloadDictItem()}))},onCancel:function(){}}):e.$message.warning("请选择一个字典项")}},{id:4,text:"刷新",icon:"iconfont-Refresh",click:function(){e.reloadDictItem()}}],openType:"",addVisible:!1,editData:{},openItemType:"",addItemVisible:!1,editItemData:{}}},methods:{getScrollY:function(){var t=this;this.$nextTick((function(){var e=t.$refs.dictList.$el.querySelector(".ant-table-wrapper");t.scrollY=e.offsetHeight-115}))},getCategories:function(){var t=this;return Object(s["a"])(Object(n["a"])().m((function e(){var a,i;return Object(n["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getCategoriesList();case 1:a=e.v,t.dictCategories=a,i=t.dictCategories.filter((function(t){return"业务字典"===t.name})),i.length>0&&(t.dictParams.typeId=i[0].id),t.onSearch();case 2:return e.a(2)}}),e)})))()},onSearch:function(){this.$refs.dictList.getListData()},reloadDictItem:function(){this.dictItemParams.dicId=this.editData.id,this.onSearch()},onDictListChange:function(t,e,a,i){i.currentDataSource;this.pagination.pageIndex=t.current,this.dictParams.sortField=a.field,this.dictParams.sortOrder=a.order,this.onSearch()},onDictRowClick:function(t){this.editData=this.$refs.dictList.getSelected(),this.dictItemParams.dicId=t.id,this.$refs.dictItemList.getListData(),this.$refs.dictItemList.clearSelected()},onDictRowDbClick:function(t){this.editData=t,this.openType="edit",this.addVisible=!0},onDictItemRowClick:function(t){this.editItemData=this.$refs.dictItemList.getSelected()},onDictItemRowDbClick:function(t){this.editItemData=t,this.openType="edit",this.addItemVisible=!0},onDictSubmit:function(t){var e=this;return Object(s["a"])(Object(n["a"])().m((function a(){return Object(n["a"])().w((function(a){while(1)switch(a.n){case 0:return a.n=1,e.onSearch();case 1:t&&e.$refs.dictList.setSelectedRow(t);case 2:return a.a(2)}}),a)})))()},onDictItemSubmit:function(t){var e=this;return Object(s["a"])(Object(n["a"])().m((function a(){return Object(n["a"])().w((function(a){while(1)switch(a.n){case 0:return a.n=1,e.reloadDictItem();case 1:t&&e.$refs.dictItemList.setSelectedRow(t);case 2:return a.a(2)}}),a)})))()}},components:{splitPane:c.a,SystemList:l["a"],AddDict:d["default"],AddDictItem:m["default"]}},f=u,p=(a("2422"),a("2877")),h=Object(p["a"])(f,i,r,!1,null,"731065e4",null);e["default"]=h.exports},a688:function(t,e,a){},a860:function(t,e,a){"use strict";a.r(e);a("4e82"),a("b0c0");var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,visible:t.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(e){t.visible=e},ok:t.handleOk,cancel:t.handleCancel}},[e("a-form-model",{ref:"form",attrs:{model:t.formData,rules:t.rules,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20}}},[e("a-form-model-item",{attrs:{label:"父级字典",prop:"pid"}},[e("a-tree-select",{attrs:{showSearch:!0,treeData:t.allDic,treeNodeFilterProp:"title",replaceFields:t.replaceFields,"dropdown-style":{maxHeight:"400px",overflow:"auto"},allowClear:!0},model:{value:t.formData.pid,callback:function(e){t.$set(t.formData,"pid",e)},expression:"formData.pid"}})],1),e("a-form-model-item",{attrs:{label:"代码",prop:"code"}},[e("a-input",{model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),e("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[e("a-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),e("a-form-model-item",{attrs:{label:"顺序",prop:"sort"}},[e("a-input-number",{model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",e)},expression:"formData.sort"}})],1),e("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[e("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:5}},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)],1)},r=[],n={name:"AddDictItem",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,required:!1,default:""},allDic:{type:Array,required:!1,default:function(){return[]}}},data:function(){var t=this;return{formData:{pid:"",dicId:"",id:"",sort:"",code:"",name:"",remark:""},rules:{code:[{validator:function(e,a,i){t.$bpmSystemProServices.systemService.validateDictItemCode({code:a,id:t.formData.id,dicId:t.formData.dicId}).then((function(t){0!==t&&"0"!==t?i(new Error("请输入唯一标识")):i()}))},trigger:"blur"},{required:!0,message:"请输入唯一标识"}],name:[{required:!0,message:"请输入字典项名称"}],sort:[{required:!0,message:"请输入顺序号"}]}}},computed:{title:function(){var t="新增";return"edit"===this.type&&(t="编辑"),"".concat(t,"字典项")},replaceFields:function(){return{children:"children",title:"name",key:"id",value:"id"}}},watch:{visible:function(t){var e=this;t?(this.resetFormData(),this.$nextTick((function(){e.formData=Object.assign(e.formData,e.editData)}))):this.resetFormData()}},methods:{resetFormData:function(){for(var t in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[t]=""},handleOk:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.handleSubmit()}))},handleSubmit:function(){var t=this;this.formData.pid=this.formData.pid||"",this.$bpmSystemProServices.systemService.saveOrUpdateDictItem(this.formData).then((function(e){e?(t.$message.success("保存成功"),t.$emit("submit",t.formData.id)):t.$message.error("保存失败"),t.$emit("update:visible",!1)}))},handleCancel:function(){this.$emit("update:visible",!1)}}},s=n,o=a("2877"),c=Object(o["a"])(s,i,r,!1,null,null,null);e["default"]=c.exports},b143:function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,visible:t.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(e){t.visible=e},ok:t.handleOk,cancel:t.handleCancel}},[e("a-form-model",{ref:"form",attrs:{model:t.formData,rules:t.rules,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20}}},[e("a-form-model-item",{attrs:{label:"类别名称",prop:"name"}},[e("a-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),e("a-form-model-item",{attrs:{label:"排序号",prop:"sortNum"}},[e("a-input-number",{model:{value:t.formData.sortNum,callback:function(e){t.$set(t.formData,"sortNum",e)},expression:"formData.sortNum"}})],1)],1)],1)},r=[],n={name:"AddDict",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,required:!1,default:""}},data:function(){return{formData:{id:"",name:"",sortNum:""},rules:{name:[{required:!0,message:"请输入类别名称"}],sortNum:[{required:!0,message:"请输入排序号"}]}}},computed:{title:function(){var t="新增";return"edit"===this.type&&(t="编辑"),"".concat(t,"字典类别")}},watch:{visible:function(t){var e=this;t?this.$nextTick((function(){e.resetFormData(),"edit"===e.type&&(e.formData=Object.assign(e.formData,e.editData))})):this.resetFormData()}},methods:{resetFormData:function(){for(var t in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[t]=""},handleOk:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.handleSubmit()}))},handleSubmit:function(){var t=this;this.$bpmSystemProServices.systemService.saveOrUpdateCategory(this.formData).then((function(e){e?(t.$message.success("保存成功"),t.$emit("submit",t.formData.id)):t.$message.error("保存失败"),t.$emit("update:visible",!1)}))},handleCancel:function(){this.$emit("update:visible",!1)}}},s=n,o=a("2877"),c=Object(o["a"])(s,i,r,!1,null,null,null);e["default"]=c.exports}}]);