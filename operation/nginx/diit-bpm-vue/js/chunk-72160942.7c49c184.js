(this["webpackJsonpMyLibrary"]=this["webpackJsonpMyLibrary"]||[]).push([["chunk-72160942","chunk-161ee779","chunk-2d210c29","chunk-2d0d3c29","chunk-2d0ac93f","chunk-2d0ac93f","chunk-2d0ac93f"],{"19ab":function(e,t,a){!function(t,a){e.exports=a()}(0,(function(){return function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=7)}([function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var a=this[t];a[2]?e.push("@media "+a[2]+"{"+a[1]+"}"):e.push(a[1])}return e.join("")},e.i=function(t,a){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},n=0;n<this.length;n++){var s=this[n][0];"number"==typeof s&&(r[s]=!0)}for(n=0;n<t.length;n++){var i=t[n];"number"==typeof i[0]&&r[i[0]]||(a&&!i[2]?i[2]=a:a&&(i[2]="("+i[2]+") and ("+a+")"),e.push(i))}},e}},function(e,t){e.exports=function(e,t,a,r){var n,s=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(n=e,s=e.default);var o="function"==typeof s?s.options:s;if(t&&(o.render=t.render,o.staticRenderFns=t.staticRenderFns),a&&(o._scopeId=a),r){var c=Object.create(o.computed||null);Object.keys(r).forEach((function(e){var t=r[e];c[e]=function(){return t}})),o.computed=c}return{esModule:n,exports:s,options:o}}},function(e,t,a){function r(e){for(var t=0;t<e.length;t++){var a=e[t],r=d[a.id];if(r){r.refs++;for(var n=0;n<r.parts.length;n++)r.parts[n](a.parts[n]);for(;n<a.parts.length;n++)r.parts.push(s(a.parts[n]));r.parts.length>a.parts.length&&(r.parts.length=a.parts.length)}else{var i=[];for(n=0;n<a.parts.length;n++)i.push(s(a.parts[n]));d[a.id]={id:a.id,refs:1,parts:i}}}}function n(){var e=document.createElement("style");return e.type="text/css",u.appendChild(e),e}function s(e){var t,a,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(r){if(m)return h;r.parentNode.removeChild(r)}if(b){var s=f++;r=p||(p=n()),t=i.bind(null,r,s,!1),a=i.bind(null,r,s,!0)}else r=n(),t=o.bind(null,r),a=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else a()}}function i(e,t,a,r){var n=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,n);else{var s=document.createTextNode(n),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(s,i[t]):e.appendChild(s)}}function o(e,t){var a=t.css,r=t.media,n=t.sourceMap;if(r&&e.setAttribute("media",r),n&&(a+="\n/*# sourceURL="+n.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=a(19),d={},u=c&&(document.head||document.getElementsByTagName("head")[0]),p=null,f=0,m=!1,h=function(){},b="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,a){m=a;var n=l(e,t);return r(n),function(t){for(var a=[],s=0;s<n.length;s++){var i=n[s],o=d[i.id];o.refs--,a.push(o)}t?(n=l(e,t),r(n)):n=[];for(s=0;s<a.length;s++){o=a[s];if(0===o.refs){for(var c=0;c<o.parts.length;c++)o.parts[c]();delete d[o.id]}}}};var v=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join("\n")}}()},function(e,t,a){a(17);var r=a(1)(a(4),a(14),"data-v-566a42b8",null);e.exports=r.exports},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(12),s=r(n),i=a(11),o=r(i);t.default={name:"splitPane",components:{Resizer:s.default,Pane:o.default},props:{minPercent:{type:Number,default:10},defaultPercent:{type:Number,default:50},split:{validator:function(e){return["vertical","horizontal"].indexOf(e)>=0},required:!0},className:String},computed:{userSelect:function(){return this.active?"none":""},cursor:function(){return this.active?"vertical"===this.split?"col-resize":"row-resize":""}},watch:{defaultPercent:function(e,t){this.percent=e}},data:function(){return{active:!1,hasMoved:!1,height:null,percent:this.defaultPercent,type:"vertical"===this.split?"width":"height",resizeType:"vertical"===this.split?"left":"top"}},methods:{onClick:function(){this.hasMoved||(this.percent=50,this.$emit("resize",this.percent))},onMouseDown:function(){this.active=!0,this.hasMoved=!1},onMouseUp:function(){this.active=!1},onMouseMove:function(e){if(0!==e.buttons&&0!==e.which||(this.active=!1),this.active){var t=0,a=e.currentTarget;if("vertical"===this.split)for(;a;)t+=a.offsetLeft,a=a.offsetParent;else for(;a;)t+=a.offsetTop,a=a.offsetParent;var r="vertical"===this.split?e.pageX:e.pageY,n="vertical"===this.split?e.currentTarget.offsetWidth:e.currentTarget.offsetHeight,s=Math.floor((r-t)/n*1e4)/100;s>this.minPercent&&s<100-this.minPercent&&(this.percent=s),this.$emit("resize",this.percent),this.hasMoved=!0}}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Pane",props:{className:String},data:function(){return{classes:[this.$parent.split,this.className].join(" "),percent:50}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{split:{validator:function(e){return["vertical","horizontal"].indexOf(e)>=0},required:!0},className:String},computed:{classes:function(){return["splitter-pane-resizer",this.split,this.className].join(" ")}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(3),n=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=n.default,"undefined"!=typeof window&&window.Vue&&window.Vue.component("split-pane",n.default)},function(e,t,a){t=e.exports=a(0)(),t.push([e.i,".splitter-pane-resizer[data-v-212fa2a4]{box-sizing:border-box;background:#000;position:absolute;opacity:.2;z-index:1;background-clip:padding-box}.splitter-pane-resizer.horizontal[data-v-212fa2a4]{height:11px;margin:-5px 0;border-top:5px solid hsla(0,0%,100%,0);border-bottom:5px solid hsla(0,0%,100%,0);cursor:row-resize;width:100%}.splitter-pane-resizer.vertical[data-v-212fa2a4]{width:11px;height:100%;margin-left:-5px;border-left:5px solid hsla(0,0%,100%,0);border-right:5px solid hsla(0,0%,100%,0);cursor:col-resize}",""])},function(e,t,a){t=e.exports=a(0)(),t.push([e.i,'.clearfix[data-v-566a42b8]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.vue-splitter-container[data-v-566a42b8]{height:100%;position:relative}.vue-splitter-container-mask[data-v-566a42b8]{z-index:9999;width:100%;height:100%;position:absolute;top:0;left:0}',""])},function(e,t,a){t=e.exports=a(0)(),t.push([e.i,".splitter-pane.vertical.splitter-paneL[data-v-815c801c]{position:absolute;left:0;height:100%;padding-right:3px}.splitter-pane.vertical.splitter-paneR[data-v-815c801c]{position:absolute;right:0;height:100%;padding-left:3px}.splitter-pane.horizontal.splitter-paneL[data-v-815c801c]{position:absolute;top:0;width:100%}.splitter-pane.horizontal.splitter-paneR[data-v-815c801c]{position:absolute;bottom:0;width:100%;padding-top:3px}",""])},function(e,t,a){a(18);var r=a(1)(a(5),a(15),"data-v-815c801c",null);e.exports=r.exports},function(e,t,a){a(16);var r=a(1)(a(6),a(13),"data-v-212fa2a4",null);e.exports=r.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.classes})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e,t,a,r=this,n=r.$createElement,s=r._self._c||n;return s("div",{staticClass:"vue-splitter-container clearfix",style:{cursor:r.cursor,userSelect:r.userSelect},on:{mouseup:r.onMouseUp,mousemove:r.onMouseMove}},[s("pane",{staticClass:"splitter-pane splitter-paneL",style:(e={},e[r.type]=r.percent+"%",e),attrs:{split:r.split}},[r._t("paneL")],2),r._v(" "),s("resizer",{style:(t={},t[r.resizeType]=r.percent+"%",t),attrs:{className:r.className,split:r.split},nativeOn:{mousedown:function(e){return r.onMouseDown(e)},click:function(e){return r.onClick(e)}}}),r._v(" "),s("pane",{staticClass:"splitter-pane splitter-paneR",style:(a={},a[r.type]=100-r.percent+"%",a),attrs:{split:r.split}},[r._t("paneR")],2),r._v(" "),r.active?s("div",{staticClass:"vue-splitter-container-mask"}):r._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.classes},[e._t("default")],2)},staticRenderFns:[]}},function(e,t,a){var r=a(8);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),a(2)("a82a4610",r,!0)},function(e,t,a){var r=a(9);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),a(2)("033d59ad",r,!0)},function(e,t,a){var r=a(10);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),a(2)("6816c93c",r,!0)},function(e,t){e.exports=function(e,t){for(var a=[],r={},n=0;n<t.length;n++){var s=t[n],i=s[0],o=s[1],c=s[2],l=s[3],d={id:e+":"+n,css:o,media:c,sourceMap:l};r[i]?r[i].parts.push(d):a.push(r[i]={id:i,parts:[d]})}return a}}])}))},"1bde":function(e,t,a){"use strict";a("bd0b")},"5dae":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"选择人员",visible:e.visible,okText:"确定",cancelText:"取消",width:"1000px",centered:""},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("SystemList",{ref:"persList",attrs:{columns:e.persColumns,render:e.$bpmSystemProServices.persService.getNotExistsDepartmentIdPage,params:{departmentId:e.editData.departmentId},searchItems:e.searchItems,pagination:e.pagination,type:"checkbox",defaultLoad:!1},on:{"update:pagination":function(t){e.pagination=t},change:e.onPersChange}})],1)},n=[],s=a("c14f"),i=a("1da1"),o=(a("4de4"),a("a15b"),a("b0c0"),a("d3b7"),a("d8b8")),c={name:"Categories",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!0}},mounted:function(){},data:function(){var e=this;return{persColumns:[{title:"序号",width:"15%",align:"center",customRender:function(e,t,a){return"".concat(a+1)}},{title:"账号名",dataIndex:"loginName",width:"30%",align:"center",sorter:!1},{title:"真实姓名",dataIndex:"name",width:"25%",align:"center",sorter:!1},{title:"用户状态",dataIndex:"status",align:"center",width:"30%",customRender:function(t){var a=e.persStatus.filter((function(e){return e.code===t}));return a.length>0?a[0].name:""}}],searchItems:[{id:"loginName",label:"账号",type:"input"},{id:"name",label:"姓名",type:"input"}],pagination:{pageIndex:1,pageSize:20,total:0},selectedRows:[],selectedRowKeys:[],persStatus:[]}},created:function(){this.getPersStatus()},methods:{getPersStatus:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.systemService.getDictByCode("YHZT");case 1:a=t.v,e.persStatus=a;case 2:return t.a(2)}}),t)})))()},onPersChange:function(e,t,a,r){r.currentDataSource;this.pagination.pageIndex=e.current,this.persParams.sortField=a.field,this.persParams.sortOrder=a.order,this.$refs.persList.getListData()},handleOk:function(){var e=this,t=this.$refs.persList.getSelectedKeys();this.$bpmSystemProServices.persService.commonPostRequest("/user/addUserToDepartment",{userIds:t.join(","),departmentId:this.editData.departmentId}).then((function(t){t?(e.$message.success("保存成功"),e.$emit("update:visible",!1),e.$emit("submit")):e.$message.error("保存失败"),e.$refs.persList.clearSelected()}))},handleCancel:function(){this.$emit("update:visible",!1),this.$refs.persList.clearSelected()}},watch:{visible:function(e){var t=this;e?this.$nextTick((function(){t.$refs.persList.getListData()})):(this.selectedRowKeys=[],this.selectedRows=[])}},components:{SystemList:o["a"]}},l=c,d=a("2877"),u=Object(d["a"])(l,r,n,!1,null,null,null);t["default"]=u.exports},a005:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"确定",cancelText:"取消",centered:"",width:"50%"},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,rules:e.rules,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:18}}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"机构名称",prop:"name"}},[t("a-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"简称",prop:"shortName"}},[t("a-input",{model:{value:e.formData.shortName,callback:function(t){e.$set(e.formData,"shortName",t)},expression:"formData.shortName"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"组织类型",prop:"orgType"}},[t("a-select",{model:{value:e.formData.orgType,callback:function(t){e.$set(e.formData,"orgType",t)},expression:"formData.orgType"}},e._l(e.bmxz,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[t("a-select",{model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},e._l(e.status,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"顺序号",prop:"sortNum"}},[t("a-input-number",{staticStyle:{width:"100%"},model:{value:e.formData.sortNum,callback:function(t){e.$set(e.formData,"sortNum",t)},expression:"formData.sortNum"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"行政区划",prop:"xzqh"}},[t("a-tree-select",{attrs:{"tree-data":e.xzqh,replaceFields:e.xzqReplaceFields,"allow-clear":"","dropdown-style":{maxHeight:"400px",overflow:"auto"}},model:{value:e.formData.xzqh,callback:function(t){e.$set(e.formData,"xzqh",t)},expression:"formData.xzqh"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"机构类型",prop:"depType"}},[t("a-select",{model:{value:e.formData.depType,callback:function(t){e.$set(e.formData,"depType",t)},expression:"formData.depType"}},e._l(e.jglx,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"上级部门",prop:"pid"}},[t("a-tree-select",{attrs:{"tree-data":e.depts,replaceFields:e.replaceFields,"allow-clear":""},model:{value:e.formData.pid,callback:function(t){e.$set(e.formData,"pid",t)},expression:"formData.pid"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"备注",prop:"remark","label-col":{span:3},"wrapper-col":{span:21}}},[t("a-textarea",{attrs:{placeholder:"备注","auto-size":{minRows:3,maxRows:5}},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),t("RoleSelect",{attrs:{visible:e.selectVisible,roleId:e.roleId},on:{"update:visible":function(t){e.selectVisible=t},submit:e.setSsld}})],1)},n=[],s=a("c14f"),i=a("1da1"),o=(a("4de4"),a("d3b7"),a("ca00")),c=a("b8eb"),l={name:"AddDept",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,default:"",required:!1}},created:function(){this.getDictInfo(),this.getLeaderList()},data:function(){return{bmxz:[],xzqh:[],ssld:[],bmssld:[],formData:{id:"",name:"",shortName:"",bmxz:"",xzqh:"",pid:"",ssld:"",ssldmc:"",sortNum:"",remark:"",status:"1",orgType:"",depType:""},rules:{name:[{required:!0,message:"请输入部门名称"}],status:[{required:!0,message:"请选择部门状态"}],bmxz:[{required:!0,message:"请选择组织类型"}],sortNum:[{required:!0,message:"请输入顺序号"}]},replaceFields:{title:"name",key:"id",value:"id"},xzqReplaceFields:{title:"name",key:"id",value:"code"},depts:[],selectVisible:!1,roleId:"7184a5a9b21e458f92757c7bc17a6749",status:[],jglx:[]}},computed:{title:function(){var e="新增";return"edit"===this.type&&(e="编辑"),"".concat(e,"部门")}},watch:{visible:function(e){var t=this;e?(this.getDictInfo(),this.$nextTick((function(){t.resetFormData(),t.type,t.formData=Object.assign(t.formData,t.editData)}))):this.resetFormData()}},methods:{getDictInfo:function(){this.getDepts(),this.getBmxz(),this.getXzq(),this.getStatus()},getDepts:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a,r;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.persService.getDeptList();case 1:a=t.v,r=a.filter((function(e){return!e.pid||""===e.pid})),Object(o["b"])(r,a),e.depts=r;case 2:return t.a(2)}}),t)})))()},getBmxz:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.systemService.getDictByCode("ZZLX");case 1:a=t.v,e.bmxz=a;case 2:return t.a(2)}}),t)})))()},getStatus:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.systemService.getDictByCode("YHZT");case 1:return a=t.v,e.status=a,t.n=2,e.$bpmSystemProServices.systemService.getDictByCode("JGLX");case 2:e.jglx=t.v;case 3:return t.a(2)}}),t)})))()},getXzq:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a,r;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.systemService.getDictByCode("XZQH");case 1:a=t.v,r=a.filter((function(e){return!e.pid||""===e.pid})),Object(o["b"])(r,a),e.xzqh=r;case 2:return t.a(2)}}),t)})))()},getLeaderList:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.persService.getLeaderList();case 1:a=t.v,e.bmssld=a;case 2:return t.a(2)}}),t)})))()},resetFormData:function(){for(var e in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[e]="";this.formData.status="1"},selectLeader:function(){this.selectVisible=!0},setSsld:function(e){e.length>0?(this.ssld=e[0].id,this.ssldmc=e[0].name):(this.ssld="",this.ssldmc="")},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.handleSubmit()}))},handleSubmit:function(){var e=this;this.formData.pid||(this.formData.pid=""),"edit"===this.type?this.$bpmSystemProServices.persService.updateDept(this.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.id),e.$emit("update:visible",!1)):e.$message.success("保存失败")})):this.$bpmSystemProServices.persService.saveDept(this.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.id),e.$emit("update:visible",!1)):e.$message.success("保存失败")}))},handleCancel:function(){this.$emit("update:visible",!1)}},components:{RoleSelect:c["default"]}},d=l,u=(a("1bde"),a("2877")),p=Object(u["a"])(d,r,n,!1,null,"5b28f5a2",null);t["default"]=p.exports},ac39:function(e,t,a){},ac85:function(e,t,a){"use strict";a("ac39")},b8eb:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"选择分管领导",visible:e.visible,okText:"确定",cancelText:"取消",centered:"",width:"800px"},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("SystemList",{ref:"leaderList",attrs:{columns:e.leaderColumns,render:e.$bpmSystemProServices.persService.getRolesList,params:e.leaderParams,pagination:e.pagination,type:"radio"},on:{"update:pagination":function(t){e.pagination=t},change:e.onLeaerChange}})],1)},n=[],s=a("d8b8"),i={name:"RoleList",props:{visible:{type:Boolean,default:!1,required:!0},roleId:{type:String,default:"",required:!1}},data:function(){return{leaderParams:{roleId:this.roleId},leaderColumns:[{title:"序号",customRender:function(e,t,a){return"".concat(a+1)},width:"10%",align:"center"},{title:"部门名称",dataIndex:"dename",width:"50%",sorter:!0},{title:"账号",dataIndex:"loginName",width:"20%",align:"center",sorter:!0},{title:"姓名",dataIndex:"name",width:"20%",align:"center",sorter:!0}],pagination:{pageIndex:1,pageSize:20,total:0},selectedRowKeys:[],selectedRows:[]}},methods:{onSearch:function(){this.$refs.leaderList.getListData()},onLeaerChange:function(e,t,a,r){r.currentDataSource;this.pagination.pageIndex=e.current,this.leaderParams.sortField=a.field,this.leaderParams.sortOrder=a.order,this.onSearch()},handleOk:function(){this.$emit("update:visible",!1),this.$emit("submit",this.selectedRows)},handleCancel:function(){this.$emit("update:visible",!1)}},components:{SystemList:s["a"]}},o=i,c=a("2877"),l=Object(c["a"])(o,r,n,!1,null,null,null);t["default"]=l.exports},bd0b:function(e,t,a){},f5ac:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"设置分管领导",visible:e.visible,okText:"确定",cancelText:"取消",centered:"",width:"500px"},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,rules:e.rules,layout:"horizontal","label-col":{span:8},"wrapper-col":{span:16}}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"部门","label-col":{span:4},"wrapper-col":{span:20},prop:"deptName"}},[t("a-input",{attrs:{disabled:""},model:{value:e.formData.deptName,callback:function(t){e.$set(e.formData,"deptName",t)},expression:"formData.deptName"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"选择人员","label-col":{span:4},"wrapper-col":{span:20},prop:"userId"}},[t("a-tree-select",{attrs:{treeCheckable:!1,treeData:e.rolesTreeData,treeNodeFilterProp:"title",replaceFields:e.replaceFields,"dropdown-style":{maxHeight:"400px",overflow:"auto"},allowClear:!0,"tree-default-expand-all":""},on:{change:e.handleChange},model:{value:e.formData.userId,callback:function(t){e.$set(e.formData,"userId",t)},expression:"formData.userId"}})],1)],1)],1)],1)],1)},n=[],s=a("c14f"),i=a("1da1"),o=(a("4de4"),a("b0c0"),a("d3b7"),a("ca00")),c={name:"AddPers",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,default:"",required:!1}},created:function(){},computed:{replaceFields:function(){return{children:"children",title:"name",key:"id",value:"id"}}},data:function(){return{persStatus:[],sf:[],zw:[],gender:[],rolesTreeData:[],deptData:[],formData:{deptId:"",deptName:"",userId:""},rules:{userId:[{required:!0,message:"请选择人员名称"}]}}},watch:{visible:function(e){var t=this;e?(this.getDeptTree(),this.$nextTick((function(){t.resetFormData(),t.editData.deptName=t.editData.name,t.editData.deptId=t.editData.id,t.editData.userId=t.editData.ssld,t.formData=Object.assign(t.formData,t.editData)}))):this.resetFormData()}},methods:{getDeptTree:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a,r;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.flowService.getParticipantTree({});case 1:a=t.v,e.deptData=a,r=e.deptData.filter((function(e){return!e.pid||""===e.pid})),Object(o["b"])(r,e.deptData,!0),e.rolesTreeData=r;case 2:return t.a(2)}}),t)})))()},resetFormData:function(){for(var e in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[e]=""},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.handleSubmit()}))},handleSubmit:function(){var e=this,t={};t=this.formData,this.$bpmSystemProServices.persService.updateSsld(t).then((function(t){t?(e.$message.success("设置成功"),e.$emit("submit"),e.$emit("update:visible",!1)):e.$message.success("设置失败")}))},handleCancel:function(){this.$emit("update:visible",!1)},handleChange:function(e){var t=this.deptData.filter((function(t){return t.id===e}));"user"!==t[0].type&&(this.formData.userId="")}}},l=c,d=a("2877"),u=Object(d["a"])(l,r,n,!1,null,null,null);t["default"]=u.exports},fd7a:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pers-container"},[t("split-pane",{attrs:{"default-percent":34,"min-percent":34,split:"vertical"}},[t("template",{slot:"paneL"},[t("div",{staticClass:"pers-left"},[t("SystemList",{ref:"deptList",attrs:{title:"机构列表",columns:e.deptColumns,render:e.$bpmSystemProServices.persService.getDeptList,params:e.deptParams,buttons:e.deptButtons,pagination:!1,showAsTree:!0,defaultExpandAllRows:!0},on:{rowClick:e.onDeptRowClick,rowDbClick:e.onDeptRowDbClick}})],1)]),t("template",{slot:"paneR"},[t("SystemList",{ref:"persList",attrs:{title:"关联用户",columns:e.persColumns,buttons:e.persButtons,render:e.$bpmSystemProServices.persService.getPersList,params:e.persParams,pagination:e.pagination,type:"checkbox",defaultLoad:!1},on:{"update:pagination":function(t){e.pagination=t},change:e.onPerListChange}},[t("template",{slot:"search-box-title"},[t("a-form",{attrs:{layout:"inline",model:e.persParams}},[t("a-form-item",{attrs:{label:"员工状态"}},[t("a-select",{staticStyle:{width:"120px"},on:{change:e.reloadPers},model:{value:e.persParams.status,callback:function(t){e.$set(e.persParams,"status",t)},expression:"persParams.status"}},[t("a-select-option",{key:"empty",attrs:{value:""}},[e._v(" 全部 ")]),e._l(e.persStatus,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])}))],2)],1),t("a-form-item",[t("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名/账号","enter-button":"",allowClear:!0},on:{search:e.reloadPers},model:{value:e.persParams.name,callback:function(t){e.$set(e.persParams,"name",t)},expression:"persParams.name"}})],1)],1)],1)],2)],1)],2),t("AddDept",{attrs:{visible:e.addDeptVisible,editData:e.editData,type:e.openDeptType},on:{"update:visible":function(t){e.addDeptVisible=t},"update:editData":function(t){e.editData=t},"update:edit-data":function(t){e.editData=t},submit:e.onDeptSubmit}}),t("SetSsld",{attrs:{visible:e.setSsldVisible,editData:e.editData},on:{"update:visible":function(t){e.setSsldVisible=t},"update:editData":function(t){e.editData=t},"update:edit-data":function(t){e.editData=t},submit:e.onDeptSubmit}}),t("AddPer",{attrs:{visible:e.addPerVisible,editData:e.editItemData,type:e.openPerType},on:{"update:visible":function(t){e.addPerVisible=t},"update:editData":function(t){e.editItemData=t},"update:edit-data":function(t){e.editItemData=t},submit:e.onPerSubmit}}),t("a-modal",{attrs:{title:"人员调动",visible:e.changeDeptVisible,okText:"确定",cancelText:"取消",centered:"",width:"600px"},on:{ok:e.changeDept,cancel:function(){e.changeDeptVisible=!1}}},[t("a-form-model",{ref:"form",attrs:{layout:"horizontal","label-col":{span:6},"wrapper-col":{span:18}}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"姓名","label-col":{span:3},"wrapper-col":{span:21}}},[t("a-select",{attrs:{mode:"multiple"},model:{value:e.usersList,callback:function(t){e.usersList=t},expression:"usersList"}},e._l(e.users,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"调动部门",prop:"departmentId","label-col":{span:3},"wrapper-col":{span:21}}},[t("a-tree-select",{attrs:{"tree-data":e.depts,replaceFields:e.replaceFields,"dropdown-style":{maxHeight:"400px",overflow:"auto"}},model:{value:e.departmentId,callback:function(t){e.departmentId=t},expression:"departmentId"}})],1)],1)],1)],1)],1)],1)},n=[],s=a("c14f"),i=a("1da1"),o=a("2909"),c=(a("99af"),a("4de4"),a("c740"),a("a15b"),a("a9e3"),a("b64b"),a("d3b7"),a("159b"),a("19ab")),l=a.n(c),d=a("d8b8"),u=a("5dae"),p=a("a005"),f=a("f5ac"),m={name:"Pers",created:function(){this.getPersStatus(),this.getPersPost(),this.getSF(),this.getGender()},data:function(){var e=this,t=this;return{depts:[],users:[],usersList:[],departmentId:"",changeDeptVisible:!1,replaceFields:{title:"name",key:"id",value:"id"},deptParams:{},deptColumns:[{title:"部门名称",dataIndex:"name",ellipsis:!0,width:150},{title:"人数",dataIndex:"usernum",align:"right",width:60},{title:"序号",dataIndex:"sortNum",align:"right",width:60},{title:"状态",dataIndex:"stauts",align:"right",width:80,customRender:function(t){var a=e.persStatus.filter((function(e){return e.id===t}));return a.length>0?a[0].name:""}}],deptButtons:[{id:1,text:"新增",icon:"iconfont-New",click:function(){t.editData=t.$refs.deptList.getSelected(),t.editData&&(t.editData={pid:t.editData.id||""}),t.openDeptType="",t.addDeptVisible=!0}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){t.editData=t.$refs.deptList.getSelected(),t.editData?(t.openDeptType="edit",t.addDeptVisible=!0):t.$message.warning("请选择一条记录！")}},{id:3,text:"删除",icon:"iconfont-Delete",click:function(){if(t.editData=t.$refs.deptList.getSelected(),t.editData){if(parseInt(t.editData.usernum)>0||t.editData.children.length>0)return void t.$message.warning("请先删除部门下的人员");t.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){t.$bpmSystemProServices.persService.deleteDept({id:t.editData.id}).then((function(e){e?(t.$message.success("删除成功"),t.$refs.deptList.clearSelected(),t.reloadDeptAndPers()):t.$message.error("删除失败")}))},onCancel:function(){}})}else t.$message.warning("请选择一条记录！")}},{id:4,text:"上移",icon:"iconfont-up",click:function(){t.deptItem=t.$refs.deptList.getSelected()||{},0===Object.keys(t.deptItem).length&&t.$message.warning("请选择一条记录！");var e=t.$refs.deptList.getData(),a=[],r=null;if(t.deptItem.pid){var n=function(e){return e.forEach((function(t,a){t.children&&(e=[].concat(Object(o["a"])(e),Object(o["a"])(n(t.children))))})),e};a=n(e);var s=a.filter((function(e){return e.id===t.deptItem.pid})),i=s[0].children;if(r=i.findIndex((function(e){return e.id===t.deptItem.id})),0===r)return void t.$message.warning("不能上移");t.currentRow=t.deptItem,t.changeRow=i[r-1]}else{var c=e.findIndex((function(e){return e.id===t.deptItem.id}));if(0===c)return void t.$message.warning("不能上移");t.currentRow=t.deptItem,t.changeRow=e[c-1]}t.updateList("sy")}},{id:5,text:"下移",icon:"iconfont-down",click:function(){t.deptItem=t.$refs.deptList.getSelected()||{},0===Object.keys(t.deptItem).length&&t.$message.warning("请选择一条记录！");var e=t.$refs.deptList.getData(),a=[],r=null;if(t.deptItem.pid){var n=function(e){return e.forEach((function(t,a){t.children&&(e=[].concat(Object(o["a"])(e),Object(o["a"])(n(t.children))))})),e};a=n(e);var s=a.filter((function(e){return e.id===t.deptItem.pid})),i=s[0].children;if(r=i.findIndex((function(e){return e.id===t.deptItem.id})),r===i.length-1)return void t.$message.warning("不能下移");t.currentRow=t.deptItem,t.changeRow=i[r+1]}else{if(r=e.findIndex((function(e){return e.id===t.deptItem.id})),r===e.length-1)return void t.$message.warning("不能下移");t.currentRow=t.deptItem,t.changeRow=e[r+1]}t.updateList("xy")}}],pagination:{pageIndex:1,pageSize:20,total:0},persColumns:[{title:"序号",width:80,align:"center",customRender:function(e,t,a){return"".concat(a+1)}},{title:"账号名",dataIndex:"loginName",ellipsis:!0,width:140,align:"center"},{title:"真实姓名",dataIndex:"name",ellipsis:!0,width:160,align:"center"},{title:"用户状态",dataIndex:"status",align:"center",width:80,customRender:function(t){var a=e.persStatus.filter((function(e){return e.code===t}));return a.length>0?a[0].name:""}},{title:"所属机构",dataIndex:"",width:180,align:"center",customRender:function(){return e.$refs.deptList.getSelected().name}}],persButtons:[{id:1,text:"添加人员",icon:"iconfont-New",click:function(){t.editData=t.$refs.deptList.getSelected(),t.editData?(t.editItemData={departmentId:t.editData.id,sx:Number(t.editData.usernum)+1},t.openPerType="",t.addPerVisible=!0):t.$message.warning("请选择部门！")}},{id:6,text:"人员调动",icon:"iconfont-rygl",click:function(){t.depts=t.$refs.deptList.getData(),t.users=t.$refs.persList.getData(),t.users.length>0?(t.departmentId="",t.usersList=[],t.changeDeptVisible=!0):t.$message.warning("没有可以调整的人员")}},{id:3,text:"移除人员",icon:"iconfont-Delete",click:function(){var e=t.$refs.persList.getSelectedKeys()||[];e.length>0?t.$confirm({title:"提示",content:"确定移除人员?",okText:"确认",cancelText:"取消",onOk:function(){t.$bpmSystemProServices.persService.commonPostRequest("/user/removeUserFromDepartment",{departmentId:t.editData.id,userIds:e.join(",")}).then((function(e){e?(t.$message.success("删除成功"),t.$refs.persList.clearSelected(),t.reloadDeptAndPers()):t.$message.error("删除失败")}))},onCancel:function(){}}):t.$message.warning("请选择一条记录！")}}],persStatus:[],persPost:[],sf:[],gender:[],persParams:{status:"",name:""},addDeptVisible:!1,editData:{},openDeptType:"",addPerVisible:!1,editItemData:{},openPerType:"",currentRow:{},changeRow:{},selectedRowKeys:[],setSsldVisible:!1}},methods:{getPersStatus:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.systemService.getDictByCode("YHZT");case 1:a=t.v,e.persStatus=a;case 2:return t.a(2)}}),t)})))()},getPersPost:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.systemService.getDictByCode("ZW");case 1:a=t.v,e.persPost=a;case 2:return t.a(2)}}),t)})))()},getSF:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.systemService.getDictByCode("SF");case 1:a=t.v,e.sf=a;case 2:return t.a(2)}}),t)})))()},getGender:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){var a;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.systemService.getDictByCode("SEX");case 1:a=t.v,e.gender=a;case 2:return t.a(2)}}),t)})))()},onSearch:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.a(2,new Promise(function(){var t=Object(i["a"])(Object(s["a"])().m((function t(a,r){return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$refs.deptList.getListData();case 1:a();case 2:return t.a(2)}}),t)})));return function(e,a){return t.apply(this,arguments)}}()))}}),t)})))()},reloadDeptAndPers:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.onSearch();case 1:e.$refs.deptList.setSelectedRow(e.editData.id),e.reloadPers();case 2:return t.a(2)}}),t)})))()},reloadPers:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.a(2,new Promise(function(){var t=Object(i["a"])(Object(s["a"])().m((function t(a,r){return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return e.persParams.departmentId=e.editData.id,t.n=1,e.$refs.persList.getListData();case 1:a();case 2:return t.a(2)}}),t)})));return function(e,a){return t.apply(this,arguments)}}()))}}),t)})))()},onDeptRowClick:function(e){this.editData=this.$refs.deptList.getSelected(),this.persParams.departmentId=e.id,this.$refs.persList.getListData(),this.$refs.persList.clearSelected()},onDeptRowDbClick:function(e){this.editData=e,this.openDeptType="edit",this.addDeptVisible=!0},onPerRowClick:function(e){this.editItemData=e},onPerRowDbClick:function(e){this.editItemData=e,this.openPerType="edit",this.addPerVisible=!0},updateUserBh:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.$bpmSystemProServices.persService.updateUserNum({bUserId:e.currentRow.id,bBh:e.changeRow.sx,xUserId:e.changeRow.id,xBh:e.currentRow.sx});case 1:return t.n=2,e.reloadPers();case 2:e.$refs.persList.setSelectedRow(e.currentRow.id);case 3:return t.a(2)}}),t)})))()},onPerListChange:function(e,t,a,r){r.currentDataSource;this.pagination.pageIndex=e.current,this.reloadPers()},onDeptSubmit:function(e){var t=this;return Object(i["a"])(Object(s["a"])().m((function a(){return Object(s["a"])().w((function(a){while(1)switch(a.n){case 0:return a.n=1,t.onSearch();case 1:e&&t.$refs.deptList.setSelectedRow(e);case 2:return a.a(2)}}),a)})))()},onPerSubmit:function(e){var t=this;return Object(i["a"])(Object(s["a"])().m((function a(){return Object(s["a"])().w((function(a){while(1)switch(a.n){case 0:return a.n=1,t.onSearch();case 1:return t.$refs.deptList.setSelectedRow(t.editData.id),a.n=2,t.reloadPers();case 2:e&&t.$refs.persList.setSelectedRow(e);case 3:return a.a(2)}}),a)})))()},changeDept:function(){var e=this;this.departmentId?0!==this.usersList.length?this.$bpmSystemProServices.persService.commonPostRequest("/user/changeDept",{userId:this.usersList.join(","),oldDepartmentId:this.persParams.departmentId,departmentId:this.departmentId}).then((function(t){t?(e.changeDeptVisible=!1,e.$message.success("操作成功"),e.$refs.persList.clearSelected(),e.reloadDeptAndPers()):e.$message.error("操作失败")})):this.$message.error("请选择人员"):this.$message.error("请选择要调动的部门！")},updateList:function(e){var t=this;return Object(i["a"])(Object(s["a"])().m((function a(){var r;return Object(s["a"])().w((function(a){while(1)switch(a.n){case 0:if(t.currentRow.sortNum&&t.changeRow.sortNum){a.n=1;break}return"sy"===e?t.$message.error("选中的菜单和其上方的菜单的顺序号均不能为空！"):t.$message.error("选中的菜单和其下方的菜单的顺序号均不能为空！"),a.a(2);case 1:r=t.currentRow.sortNum,t.currentRow.sortNum=t.changeRow.sortNum,t.changeRow.sortNum=r,t.$bpmSystemProServices.persService.updateDept(t.changeRow).then((function(e){e||t.$message.error("更新失败")})),t.$bpmSystemProServices.persService.updateDept(t.currentRow).then((function(e){e?t.onSearch():t.$message.error("更新失败")}));case 2:return a.a(2)}}),a)})))()}},components:{splitPane:l.a,SystemList:d["a"],AddPer:u["default"],AddDept:p["default"],SetSsld:f["default"]}},h=m,b=(a("ac85"),a("2877")),v=Object(b["a"])(h,r,n,!1,null,"7e685fd3",null);t["default"]=v.exports}}]);