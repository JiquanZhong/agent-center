(this["webpackJsonpMyLibrary"]=this["webpackJsonpMyLibrary"]||[]).push([["chunk-851b3f86","chunk-356812cf","chunk-e7ee3dc2","chunk-773554b9","chunk-34e01a39","chunk-63e5fc68","chunk-5d821e7f","chunk-2d20ebc4","chunk-2d2091e7","chunk-2d0cebab"],{"07e1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"counter-container"},[t("SystemList",{ref:"counterList",attrs:{title:"计数器管理",rowKey:"counterNumeric",columns:e.counterColumns,render:e.$bpmSystemProServices.systemService.getCounterList,params:e.counterParams,pagination:e.pagination,buttons:e.counterButtons,type:"checkbox",scroll:{y:e.scrollY}},on:{"update:pagination":function(t){e.pagination=t},change:e.onCounterListChange,rowClick:e.onRowClick,rowDbClick:e.onRowDbclick}},[t("template",{slot:"search-box"},[t("a-form",{attrs:{layout:"inline"}},[t("a-form-item",[t("a-input-search",{attrs:{placeholder:"请输入计数器名称","enter-button":"",allowClear:""},on:{search:e.onSearch},model:{value:e.counterParams.counterName,callback:function(t){e.$set(e.counterParams,"counterName",t)},expression:"counterParams.counterName"}})],1)],1)],1)],2),t("AddCounter",{attrs:{visible:e.addVisible,editData:e.editData,type:e.openType},on:{"update:visible":function(t){e.addVisible=t},"update:editData":function(t){e.editData=t},"update:edit-data":function(t){e.editData=t},submit:e.onCounterSubmit}})],1)},n=[],r=a("c7eb"),s=a("1da1"),o=(a("4de4"),a("a15b"),a("b0c0"),a("d3b7"),a("d8b8")),c=a("2a8a"),l={name:"Counter",created:function(){this.getResetStrategies(),this.getScrollY()},data:function(){var e=this,t=this;return{scrollY:null,addVisible:!1,editData:{},openType:"",counterParams:{counterName:""},selectedRows:[],selectedRowKeys:[],pagination:{pageIndex:1,pageSize:20,total:0},counterColumns:[{title:"计数器名称",dataIndex:"counterName",ellipsis:!0,width:"220px"},{title:"初始值",dataIndex:"initialValue",align:"center",width:"120px"},{title:"当前值",dataIndex:"currentValue",align:"center",width:"120px"},{title:"步长",dataIndex:"stepLength",align:"center",width:"120px"},{title:"清零规则",dataIndex:"resetStrategy",align:"center",ellipsis:!0,customRender:function(t){var a=e.resetStrategies.filter((function(e){return e.code===t}));return a.length>0?a[0].name:""}},{title:"创建时间",dataIndex:"currenttime",align:"center",ellipsis:!0,width:"220px"},{title:"备注",dataIndex:"description",ellipsis:!0}],counterButtons:[{id:1,text:"新增",icon:"iconfont-New",click:function(){t.editData={},t.openType="",t.addVisible=!0}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){var e=t.$refs.counterList.getSelecteds();e&&e.length>1?t.$message.warning("请选择一条数据"):(t.editData=t.$refs.counterList.getSelected(),t.editData?(t.openType="edit",t.addVisible=!0):t.$message.warning("请选择要编辑的计数器"))}},{id:3,text:"删除",icon:"iconfont-Delete",click:function(){var e=t.$refs.counterList.getSelectedKeys();e&&e.length>0?t.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){t.$bpmSystemProServices.systemService.deleteCounter({ids:e.join(",")}).then((function(e){e?(t.$message.success("删除成功"),t.$refs.counterList.clearSelected(),t.onSearch()):t.$message.error("删除失败")}))},onCancel:function(){}}):t.$message.warning("请选择要删除的计数器")}}]}},methods:{getScrollY:function(){var e=this;this.$nextTick((function(){var t=e.$refs.counterList.$el.querySelector(".ant-table-wrapper");e.scrollY=t.offsetHeight-115}))},getResetStrategies:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getDictByCode("QLGZ");case 2:a=t.sent,e.resetStrategies=a;case 4:case"end":return t.stop()}}),t)})))()},onCounterListChange:function(e,t,a,i){i.currentDataSource;this.pagination.pageIndex=e.current,this.onSearch()},onSearch:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(a,i){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.counterList.getListData();case 2:a();case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()},onRowClick:function(e){this.editData=e},onRowDbclick:function(e){this.editData=e,this.openType="edit",this.addVisible=!0},onCounterSubmit:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.onSearch();case 2:e&&t.$refs.counterList.setSelectedRow(e);case 3:case"end":return a.stop()}}),a)})))()}},components:{SystemList:o["a"],AddCounter:c["default"]}},u=l,m=(a("fa68"),a("2877")),d=Object(m["a"])(u,i,n,!1,null,"0f07d7f9",null);t["default"]=d.exports},"0a05":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dict-container"},[t("split-pane",{attrs:{"min-percent":26,"default-percent":26,split:"vertical"}},[t("template",{slot:"paneL"},[t("div",{staticClass:"symbol-left"},[t("a-row",{staticClass:"table-title",attrs:{gutter:24,type:"flex",justify:"space-between",align:"middle"}},[t("a-col",{attrs:{span:10}},[t("span",{staticClass:"table-title-text"},[e._v("文号分类")])])],1),t("a-row",{staticStyle:{padding:"0 16px"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("a-col",{staticClass:"btns",attrs:{flex:"auto"}},e._l(e.symbolButtons,(function(a,i){return t("a-button",{key:a.id||i,attrs:{type:a.type||"default"},on:{click:function(){a.click&&a.click()}}},[a.icon?t("icon-font",{attrs:{type:a.icon}}):e._e(),e._v(" "+e._s(a.text)+" ")],1)})),1)],1),t("a-row",{staticStyle:{flex:"1",overflow:"auto",padding:"0 6px"}},[t("a-col",[t("a-tree",{staticClass:"ant-tree-custom",attrs:{"tree-data":e.treeData,showIcon:!0,defaultExpandAll:!0,replaceFields:e.replaceFields},on:{select:e.onTreeNodeSelect},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}},[t("icon-font",{staticStyle:{"font-size":"16px"},attrs:{slot:"switcherIcon",type:"iconfont-arrow-down"},slot:"switcherIcon"}),t("template",{slot:"custom"},[t("icon-font",{attrs:{type:"iconfont-wjj"}})],1)],2)],1)],1)],1)]),t("template",{slot:"paneR"},[t("SystemList",{ref:"symbolItemList",attrs:{title:"文号列表",columns:e.symbolItemColumns,buttons:e.symbolItemButtons,params:e.symbolItemParams,render:e.$bpmSystemProServices.systemService.symbolItemList,defaultLoad:!1,pagination:!1,scroll:{y:e.scrollY}},on:{rowClick:e.onSymbolItemRowClick,rowDbClick:e.onSymbolItemRowDbClick}},[t("template",{slot:"search-box"},[t("a-form",{attrs:{layout:"inline"}},[t("a-form-item",[t("a-input-search",{attrs:{placeholder:"请输入文号名称","enter-button":"",allowClear:""},on:{search:e.treeSearch},model:{value:e.symbolItemParams.numericdefineName,callback:function(t){e.$set(e.symbolItemParams,"numericdefineName",t)},expression:"symbolItemParams.numericdefineName"}})],1)],1)],1)],2)],1)],2),t("AddSymbol",{ref:"AddSymbol",attrs:{visible:e.addVisible,editData:e.editData,type:e.openType},on:{"update:visible":function(t){e.addVisible=t},"update:editData":function(t){e.editData=t},"update:edit-data":function(t){e.editData=t},submit:e.onSymbolSubmit}}),t("AddSymbolItem",{ref:"AddSymbolItem",attrs:{visible:e.addItemVisible,editData:e.editItemData,type:e.openSymbolItemType},on:{"update:visible":function(t){e.addItemVisible=t},"update:editData":function(t){e.editItemData=t},"update:edit-data":function(t){e.editItemData=t},submit:e.onSymbolItemSubmit}})],1)},n=[],r=a("53ca"),s=a("c7eb"),o=a("1da1"),c=(a("4de4"),a("d81d"),a("b64b"),a("d3b7"),a("159b"),a("19ab")),l=a.n(c),u=a("d8b8"),m=a("6160"),d=a("1419"),f=a("ca00"),p={name:"SymbolGl",mounted:function(){this.onSearch()},data:function(){var e=this;return{scrollY:null,symbolColumns:[],symbolButtons:[{id:1,text:"增加分类",icon:"iconfont-New",click:function(){e.editData={},e.openType="",e.addVisible=!0}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){e.selectedNode&&Object.keys(e.selectedNode).length>0?(e.editData=e.selectedNode,e.openType="edit",e.addVisible=!0):e.$message.warning("请选择要编辑的文号分类")}},{id:3,text:"删除",icon:"iconfont-Delete",click:function(){e.selectedKeys.length>0?e.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){e.$bpmSystemProServices.systemService.delSymbolList({id:e.selectedKeys[0]}).then((function(t){t?(e.$message.success("删除成功"),e.onSearch(),e.selectedKeys=[],e.selectedNode={}):e.$message.error("删除失败")}))},onCancel:function(){}}):e.$message.warning("请选择要删除的文号分类")}}],symbolItemButtons:[{id:1,text:"增加文号",icon:"iconfont-New",click:function(){e.selectedKeys.length>0?(e.openSymbolItemType="",e.editItemData={},e.editItemData.referenceNumericId=e.selectedKeys[0],e.addItemVisible=!0):e.$message.warning("请选择文号分类")}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){e.editItemData=e.$refs.symbolItemList.getSelected(),e.editItemData?(e.openSymbolItemType="edit",e.addItemVisible=!0):e.$message.warning("请选择要编辑的文号")}},{id:3,text:"删除",icon:"iconfont-Delete",click:function(){e.editItemData=e.$refs.symbolItemList.getSelected(),e.editItemData&&e.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){e.$bpmSystemProServices.systemService.delSymbol({id:e.editItemData.id}).then((function(t){t?(e.$message.success("删除成功"),e.$refs.symbolItemList.clearSelected(),e.onSearch(),e.reloadSymbolItemList()):e.$message.error("删除失败")}))},onCancel:function(){}})}}],symbolItemColumns:[{title:"文号名称",dataIndex:"numericdefineName",width:"260px",ellipsis:!0},{title:"文号标识",dataIndex:"flagName",width:"300px",ellipsis:!0},{title:"文号格式",dataIndex:"numericCode",ellipsis:!0}],symbolItemParams:{referenceNumberId:"",numericdefineName:""},treeData:[],replaceFields:{title:"numberName",key:"id"},selectedKeys:[],editData:{},editItemData:{},openType:"",openSymbolItemType:"",addVisible:!1,addItemVisible:!1,selectedNode:{}}},created:function(){this.getScrollY()},methods:{getScrollY:function(){var e=this;this.$nextTick((function(){var t=e.$refs.symbolItemList.$el.querySelector(".ant-table-wrapper");e.scrollY=t.offsetHeight-50}))},onSearch:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(o["a"])(Object(s["a"])().mark((function t(a,i){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$bpmSystemProServices.systemService.getSymbolList({}).then((function(t){t.map((function(e){e.scopedSlots={icon:"custom"}}));var i=t.filter((function(e){return!e.pid||""===e.pid}));Object(f["b"])(i,t),e.treeData=i,a()}));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()},onTreeNodeSelect:function(e,t){t.selected,t.selectedNodes,t.node,t.event;this.selectedKeys=e,this.symbolItemParams.numericdefineName="",this.getSelectedNode(this.treeData,this.selectedKeys[0]),this.editItemData={},this.reloadSymbolItemList(),this.$refs.symbolItemList.clearSelected()},treeSearch:function(){this.reloadSymbolItemList(),this.$refs.symbolItemList.clearSelected()},getSelectedNode:function(e,t){var a=this;e.forEach((function(e){e.id===t&&(a.selectedNode=e),"object"===Object(r["a"])(e.children)&&a.getSelectedNode(e.children,t)}))},reloadSymbolItemList:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.symbolItemParams.referenceNumberId=e.selectedKeys[0]?e.selectedKeys[0]:"",t.abrupt("return",new Promise(function(){var t=Object(o["a"])(Object(s["a"])().mark((function t(a,i){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.symbolItemList.getListData();case 2:a();case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})))()},onSymbolItemRowClick:function(e){this.editItemData=e},onSymbolItemRowDbClick:function(e){this.editItemData=e,this.openSymbolItemType="edit",this.addItemVisible=!0},onSymbolSubmit:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.onSearch();case 2:e&&(t.selectedKeys=[e],t.getSelectedNode(t.treeData,e));case 3:case"end":return a.stop()}}),a)})))()},onSymbolItemSubmit:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.reloadSymbolItemList();case 2:e&&t.$refs.symbolItemList.setSelectedRow(e);case 3:case"end":return a.stop()}}),a)})))()}},components:{splitPane:l.a,SystemList:u["a"],AddSymbol:m["default"],AddSymbolItem:d["default"]}},b=p,h=(a("17ce"),a("2877")),y=Object(h["a"])(b,i,n,!1,null,"7c672e25",null);t["default"]=y.exports},1419:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,rules:e.rules,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20}}},[t("a-form-model-item",{attrs:{label:"文号名称",prop:"numericdefineName"}},[t("a-input",{model:{value:e.formData.numericdefineName,callback:function(t){e.$set(e.formData,"numericdefineName",t)},expression:"formData.numericdefineName"}})],1),t("a-form-model-item",{attrs:{label:"文号标识",prop:"flagName"}},[t("a-input",{model:{value:e.formData.flagName,callback:function(t){e.$set(e.formData,"flagName",t)},expression:"formData.flagName"}})],1),t("a-form-model-item",{attrs:{label:"文号格式",prop:"numericCode"}},[t("a-input",{staticStyle:{width:"calc(100% - 80px)"},model:{value:e.formData.numericCode,callback:function(t){e.$set(e.formData,"numericCode",t)},expression:"formData.numericCode"}}),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.EditFormat}},[e._v("编辑")])],1)],1)],1),t("EditSymbolFormat",{attrs:{numericCode:e.formData.numericCode,visible:e.editSymbolFormatVisible},on:{"update:visible":function(t){e.editSymbolFormatVisible=t},submit:e.setSymbolFormat}})],1)},n=[],r=a("bfcc"),s={name:"AddSymbolItem",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,default:"",required:!1}},data:function(){var e=this;return{formData:{id:"",numericdefineName:"",flagName:"",numericCode:"",referenceNumericId:""},editSymbolFormatVisible:!1,rules:{numericdefineName:[{required:!0,message:"请输入文号名称"}],flagName:[{validator:function(t,a,i){e.$bpmSystemProServices.systemService.validateNumberDefine({flagName:a,id:e.formData.id}).then((function(e){e?i(new Error("文号标识已存在")):i()}))},trigger:"blur"},{required:!0,message:"请输入文号标识"}],numericCode:[{required:!0,message:"请输入文号格式"}]}}},computed:{title:function(){var e="新增";return"edit"===this.type&&(e="编辑"),"".concat(e,"文号")}},watch:{visible:function(e){var t=this;e?this.$nextTick((function(){t.resetFormData(),"edit"===t.type&&(t.formData=Object.assign(t.formData,t.editData)),t.formData.referenceNumericId=t.editData.referenceNumericId})):this.resetFormData()}},methods:{resetFormData:function(){for(var e in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[e]=""},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.$bpmSystemProServices.systemService.saveOrUpdateSymbolItem(e.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.id)):e.$message.error("保存失败"),e.$emit("update:visible",!1)}))}))},handleCancel:function(){this.$emit("update:visible",!1)},EditFormat:function(){this.editSymbolFormatVisible=!0},setSymbolFormat:function(e){this.formData.numericCode=e}},components:{EditSymbolFormat:r["default"]}},o=s,c=a("2877"),l=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=l.exports},"160f":function(e,t,a){},"17ce":function(e,t,a){"use strict";a("2fad")},"1a1a":function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,rules:e.rules,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20}}},[t("a-form-model-item",{attrs:{label:"类别",prop:"typeId"}},[t("a-select",{staticStyle:{width:"200px","margin-right":"16px"},model:{value:e.formData.typeId,callback:function(t){e.$set(e.formData,"typeId",t)},expression:"formData.typeId"}},e._l(e.categories,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])})),1),t("a-button",{attrs:{type:"primary"},on:{click:e.openCategories}},[e._v(" 类别管理 ")])],1),t("a-form-model-item",{attrs:{label:"代码",prop:"code"}},[t("a-input",{model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1),t("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[t("a-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),t("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[t("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:5}},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),t("CategoriesList",{attrs:{visible:e.categoriesVisible},on:{"update:visible":function(t){e.categoriesVisible=t}}})],1)},n=[],r=a("c7eb"),s=a("1da1"),o=(a("4de4"),a("d3b7"),a("2930")),c={name:"AddDict",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,required:!1,default:""}},created:function(){this.getCategories()},data:function(){var e=this;return{categoriesVisible:!1,categories:[],formData:{id:"",typeId:"",code:"",name:"",remark:""},rules:{code:[{validator:function(t,a,i){e.$bpmSystemProServices.systemService.validateDictCode({code:a,id:e.formData.id}).then((function(e){0!==e&&"0"!==e?i(new Error("请输入唯一标识")):i()}))},trigger:"blur"},{required:!0,message:"请输入唯一标识"}],name:[{required:!0,message:"请输入字典名称"}],typeId:[{required:!0,message:"请选择类别"}]}}},computed:{title:function(){var e="新增";return"edit"===this.type&&(e="编辑"),"".concat(e,"字典")}},watch:{visible:function(e){var t=this;e?this.$nextTick((function(){t.getCategories(),t.resetFormData(),"edit"===t.type&&(t.formData=Object.assign(t.formData,t.editData))})):this.resetFormData()},categoriesVisible:function(e){e||this.getCategories()}},methods:{getCategories:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getCategoriesList();case 2:a=t.sent,e.categories=a;case 4:case"end":return t.stop()}}),t)})))()},resetFormData:function(){for(var e in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[e]="";var t=this.categories.filter((function(e){return"业务字典"===e.name}));t.length>0&&(this.formData.typeId=t[0].id)},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.handleSubmit()}))},handleSubmit:function(){var e=this;this.$bpmSystemProServices.systemService.saveOrUpdateDict(this.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.id)):e.$message.error("保存失败"),e.$emit("update:visible",!1)}))},handleCancel:function(){this.$emit("update:visible",!1)},openCategories:function(){this.categoriesVisible=!0}},components:{CategoriesList:o["default"]}},l=c,u=a("2877"),m=Object(u["a"])(l,i,n,!1,null,null,null);t["default"]=m.exports},"1ffa":function(e,t,a){},2422:function(e,t,a){"use strict";a("a688")},"260d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"menus-container"},[t("SystemList",{ref:"menuList",attrs:{title:"菜单管理",columns:e.menuColumns,render:e.$bpmSystemProServices.systemService.getMenuList,buttons:e.menuButtons,scroll:{y:e.scrollY},pagination:!1,showAsTree:!0,defaultExpandAllRows:!0,expandIconColumnIndex:1},on:{rowClick:e.onRowClick,rowDbClick:e.onRowDbClick,datachange:e.getKey}}),t("AddMenu",{attrs:{visible:e.addVisible,editData:e.editData,type:e.openType,menus:e.menus},on:{"update:visible":function(t){e.addVisible=t},"update:editData":function(t){e.editData=t},"update:edit-data":function(t){e.editData=t},submit:e.onSearch}})],1)},n=[],r=a("c7eb"),s=a("1da1"),o=a("2909"),c=(a("99af"),a("4de4"),a("c740"),a("b64b"),a("d3b7"),a("159b"),a("d8b8")),l=a("a18c6"),u={name:"Menus",mounted:function(){},data:function(){var e=this;return{scrollY:null,menus:[],addVisible:!1,editData:{},openType:"",currentRow:{},changeRow:{},menuItem:{},menuColumns:[{title:"序号",customRender:function(e,t,a){return"".concat(a+1)},width:40,align:"center"},{title:"显示名称",dataIndex:"name",ellipsis:!0,width:120},{title:"配置名称",dataIndex:"confName",ellipsis:!0,width:120},{title:"菜单标识",dataIndex:"code",ellipsis:!0,width:80},{title:"菜单路径",dataIndex:"url",ellipsis:!0,width:300},{title:"顺序号",dataIndex:"sortNum",ellipsis:!0,width:50,align:"center"},{title:"菜单图标",dataIndex:"icon",ellipsis:!0,width:50,align:"center",scopedSlots:{customRender:"icon"}}],menuButtons:[{id:1,text:"新增",icon:"iconfont-New",click:function(){e.editData={pid:e.editData.id},e.openType="",e.menus=JSON.parse(JSON.stringify(e.$refs.menuList.getData())),e.addVisible=!0}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){e.openType="edit",e.menus=JSON.parse(JSON.stringify(e.$refs.menuList.getData())),e.addVisible=!0}},{id:3,text:"删除",icon:"iconfont-Delete",click:function(){e.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){e.$bpmSystemProServices.systemService.deleteMenu({resourceId:e.editData.id}).then((function(){e.onSearch()}))},onCancel:function(){}})}},{id:4,text:"上移",icon:"iconfont-up",click:function(){e.menuItem=e.$refs.menuList.getSelected()||{},0===Object.keys(e.menuItem).length&&e.$message.warning("请选择一条记录！");var t=e.$refs.menuList.getData(),a=[],i=null;if(e.menuItem.pid){var n=function(e){return e.forEach((function(t,a){t.children&&(e=[].concat(Object(o["a"])(e),Object(o["a"])(n(t.children))))})),e};a=n(t);var r=a.filter((function(t){return t.id===e.menuItem.pid})),s=r[0].children;if(i=s.findIndex((function(t){return t.id===e.menuItem.id})),0===i)return void e.$message.warning("不能上移");e.currentRow=e.menuItem,e.changeRow=s[i-1]}else{var c=t.findIndex((function(t){return t.id===e.menuItem.id}));if(0===c)return void e.$message.warning("不能上移");e.currentRow=e.menuItem,e.changeRow=t[c-1]}e.updateList("sy")}},{id:5,text:"下移",icon:"iconfont-down",click:function(){e.menuItem=e.$refs.menuList.getSelected()||{},0===Object.keys(e.menuItem).length&&e.$message.warning("请选择一条记录！");var t=e.$refs.menuList.getData(),a=[],i=null;if(e.menuItem.pid){var n=function(e){return e.forEach((function(t,a){t.children&&(e=[].concat(Object(o["a"])(e),Object(o["a"])(n(t.children))))})),e};a=n(t);var r=a.filter((function(t){return t.id===e.menuItem.pid})),s=r[0].children;if(i=s.findIndex((function(t){return t.id===e.menuItem.id})),i===s.length-1)return void e.$message.warning("不能下移");e.currentRow=e.menuItem,e.changeRow=s[i+1]}else{if(i=t.findIndex((function(t){return t.id===e.menuItem.id})),i===t.length-1)return void e.$message.warning("不能下移");e.currentRow=e.menuItem,e.changeRow=t[i+1]}e.updateList("xy")}},{id:6,text:"刷新",icon:"iconfont-Refresh",click:function(){e.onSearch()}}]}},provide:function(){return{getList:this.getList}},methods:{getScrollY:function(){var e=this;this.$nextTick((function(){var t=e.$refs.menuList.$el.querySelector(".ant-table-wrapper");e.scrollY=t.offsetHeight-50}))},getList:function(){return JSON.parse(JSON.stringify(this.$refs.menuList.getData()))},onSearch:function(){this.$refs.menuList.getListData()},onRowClick:function(e){this.editData=e},onRowDbClick:function(e){this.editData=e,this.menus=JSON.parse(JSON.stringify(this.$refs.menuList.getData())),this.openType="edit",this.addVisible=!0},updateList:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){var i;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.currentRow.sortNum&&t.changeRow.sortNum){a.next=3;break}return"sy"===e?t.$message.error("选中的菜单和其上方的菜单的顺序号均不能为空！"):t.$message.error("选中的菜单和其下方的菜单的顺序号均不能为空！"),a.abrupt("return");case 3:i=t.currentRow.sortNum,t.currentRow.sortNum=t.changeRow.sortNum,t.changeRow.sortNum=i,t.$bpmSystemProServices.systemService.updateMenu(t.changeRow).then((function(e){e||t.$message.error("更新失败")})),t.$bpmSystemProServices.systemService.updateMenu(t.currentRow).then((function(e){e?t.onSearch():t.$message.error("更新失败")}));case 8:case"end":return a.stop()}}),a)})))()},getKey:function(){this.$refs.menuList.setSelectedRow(this.currentRow.id)}},created:function(){this.getScrollY()},components:{SystemList:c["a"],AddMenu:l["default"]}},m=u,d=(a("a5ef"),a("2877")),f=Object(d["a"])(m,i,n,!1,null,"8417a0be",null);t["default"]=f.exports},2930:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"类别管理",visible:e.visible,centered:"",width:"700px",footer:null},on:{"update:visible":function(t){e.visible=t},cancel:e.handleCancel}},[t("SystemList",{ref:"categoriesList",attrs:{columns:e.categoryColumns,render:e.$bpmSystemProServices.systemService.getCategoriesList,params:e.categoryParams,buttons:e.categoryButtons,operations:e.operations}},[t("template",{slot:"search-box"},[t("a-form",{attrs:{layout:"inline"}},[t("a-form-item",[t("a-input-search",{attrs:{placeholder:"请输入类别名称","enter-button":""},on:{search:e.onSearch},model:{value:e.categoryParams.name,callback:function(t){e.$set(e.categoryParams,"name",t)},expression:"categoryParams.name"}})],1)],1)],1)],2),t("AddCategory",{attrs:{visible:e.addVisible,editData:e.editData,type:e.openType},on:{"update:visible":function(t){e.addVisible=t},"update:editData":function(t){e.editData=t},"update:edit-data":function(t){e.editData=t},submit:e.onCategorySubmit}})],1)},n=[],r=a("c7eb"),s=a("1da1"),o=(a("d3b7"),a("d8b8")),c=a("b143"),l={name:"Categories",props:{visible:{type:Boolean,default:!1,required:!0}},data:function(){var e=this;return{categoryParams:{name:""},categoryColumns:[{title:"类别名称",dataIndex:"name",width:"60%",editable:!0},{title:"排序号",dataIndex:"sortNum",width:"20%",align:"center",editable:!0},{title:"操作",key:"action",width:"20%",align:"center",scopedSlots:{customRender:"action"}}],categoryButtons:[{id:1,text:"新增",icon:"iconfont-New",click:function(){e.editData={},e.openType="",e.addVisible=!0}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){e.editData=e.$refs.categoriesList.getSelected(),e.editData?(e.openType="edit",e.addVisible=!0):e.$message.warning("请选择一条记录！")}}],operations:[{name:"删除",click:function(t,a){e.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){e.$bpmSystemProServices.systemService.deleteCategory({id:t.id}).then((function(t){t?(e.$message.success("删除成功"),e.$refs.categoriesList.clearSelected(),e.onSearch()):e.$message.error("删除失败")}))},onCancel:function(){}})}}],openType:"",addVisible:!1,editData:{}}},methods:{onSearch:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(a,i){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.categoriesList.getListData();case 2:a();case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()},handleCancel:function(){this.$emit("update:visible",!1)},onCategorySubmit:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.onSearch();case 2:e&&t.$refs.categoriesList.setSelectedRow(e);case 3:case"end":return a.stop()}}),a)})))()}},components:{SystemList:o["a"],AddCategory:c["default"]}},u=l,m=a("2877"),d=Object(m["a"])(u,i,n,!1,null,null,null);t["default"]=d.exports},"2a8a":function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("b0c0");var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20}}},[t("a-form-model-item",{attrs:{label:"计数器名称",prop:"counterName"}},[t("a-input",{model:{value:e.formData.counterName,callback:function(t){e.$set(e.formData,"counterName",t)},expression:"formData.counterName"}})],1),t("a-form-model-item",{attrs:{label:"初始值",prop:"initialValue"}},[t("a-input-number",{model:{value:e.formData.initialValue,callback:function(t){e.$set(e.formData,"initialValue",t)},expression:"formData.initialValue"}})],1),t("a-form-model-item",{attrs:{label:"当前值",prop:"currentValue"}},[t("a-input-number",{model:{value:e.formData.currentValue,callback:function(t){e.$set(e.formData,"currentValue",t)},expression:"formData.currentValue"}})],1),t("a-form-model-item",{attrs:{label:"步长",prop:"stepLength"}},[t("a-input-number",{model:{value:e.formData.stepLength,callback:function(t){e.$set(e.formData,"stepLength",t)},expression:"formData.stepLength"}})],1),t("a-form-model-item",{attrs:{label:"清零规则",prop:"resetStrategy"}},[t("a-select",{model:{value:e.formData.resetStrategy,callback:function(t){e.$set(e.formData,"resetStrategy",t)},expression:"formData.resetStrategy"}},e._l(e.resetStrategies,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"备注",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"备注","auto-size":{minRows:3,maxRows:5}},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1)],1)],1)},n=[],r=a("c7eb"),s=a("1da1"),o={name:"AddCounter",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,default:"",required:!1}},mounted:function(){this.getResetStrategies()},data:function(){return{resetStrategies:[],formData:{counterNumeric:"",counterName:"",initialValue:"",currentValue:"",stepLength:"",resetStrategy:"",description:""}}},computed:{title:function(){var e="新增";return"edit"===this.type&&(e="编辑"),"".concat(e,"计数器")}},watch:{visible:function(e){var t=this;e?this.$nextTick((function(){t.resetFormData(),"edit"===t.type&&(t.formData=Object.assign(t.formData,t.editData))})):this.resetFormData()}},methods:{getResetStrategies:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getDictByCode("QLGZ");case 2:a=t.sent,e.resetStrategies=a;case 4:case"end":return t.stop()}}),t)})))()},resetFormData:function(){for(var e in this.formData)this.formData[e]=""},handleOk:function(){var e=this;this.$bpmSystemProServices.systemService.saveCounter(this.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.counterNumeric)):e.$message.error("保存失败"),e.$emit("update:visible",!1)}))},handleCancel:function(){this.$emit("update:visible",!1)}}},c=o,l=a("2877"),u=Object(l["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},"2fad":function(e,t,a){},"3f53":function(e,t,a){"use strict";a("1ffa")},5124:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dict-container"},[t("split-pane",{attrs:{"min-percent":30,"default-percent":60,split:"vertical"}},[t("template",{slot:"paneL"},[t("div",{staticClass:"dict-left"},[t("SystemList",{ref:"dictList",attrs:{title:"字典管理",columns:e.dictColumns,render:e.$bpmSystemProServices.systemService.getDictList,params:e.dictParams,scroll:{y:e.scrollY},buttons:e.dictButtons,defaultLoad:!1,pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t},change:e.onDictListChange,rowClick:e.onDictRowClick,rowDbClick:e.onDictRowDbClick}},[t("template",{slot:"search-box"},[t("a-form",{attrs:{layout:"inline"}},[t("a-form-item",{attrs:{label:"类别"}},[t("a-select",{staticStyle:{width:"120px"},on:{change:e.onSearch},model:{value:e.dictParams.typeId,callback:function(t){e.$set(e.dictParams,"typeId",t)},expression:"dictParams.typeId"}},[t("a-select-option",{key:"empty",attrs:{value:""}},[e._v(" 全部 ")]),e._l(e.dictCategories,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])}))],2)],1),t("a-form-item",[t("a-input-search",{attrs:{placeholder:"请输入字典名称","enter-button":""},on:{search:e.onSearch},model:{value:e.dictParams.name,callback:function(t){e.$set(e.dictParams,"name",t)},expression:"dictParams.name"}})],1)],1)],1)],2)],1)]),t("template",{slot:"paneR"},[t("SystemList",{ref:"dictItemList",attrs:{title:"字典项",columns:e.dictItemColumns,buttons:e.dictItemButtons,render:e.$bpmSystemProServices.systemService.getDictItemList,params:e.dictItemParams,pagination:!1,defaultLoad:!1,showAsTree:!0},on:{rowClick:e.onDictItemRowClick,rowDbClick:e.onDictItemRowDbClick}})],1)],2),t("AddDict",{attrs:{visible:e.addVisible,editData:e.editData,type:e.openType},on:{"update:visible":function(t){e.addVisible=t},"update:editData":function(t){e.editData=t},"update:edit-data":function(t){e.editData=t},submit:e.onDictSubmit}}),t("AddDictItem",{attrs:{visible:e.addItemVisible,editData:e.editItemData,type:e.openItemType,allDic:e.allDic},on:{"update:visible":function(t){e.addItemVisible=t},"update:editData":function(t){e.editItemData=t},"update:edit-data":function(t){e.editItemData=t},submit:e.onDictItemSubmit}})],1)},n=[],r=a("c7eb"),s=a("1da1"),o=(a("4de4"),a("d3b7"),a("19ab")),c=a.n(o),l=a("d8b8"),u=a("1a1a"),m=a("a860"),d={name:"Dict",created:function(){this.getCategories(),this.getScrollY()},data:function(){var e=this,t=this;return{scrollY:null,dictCategories:[],dictParams:{lbmc:"",name:"",sortField:"",sortOrder:"",typeId:""},pagination:{pageIndex:1,pageSize:20,total:0},dictItemParams:{dicId:""},allDic:[],dictColumns:[{title:"序号",customRender:function(e,t,a){return"".concat(a+1)},width:80,align:"center"},{title:"类别",dataIndex:"typeId",customRender:function(t){var a=e.dictCategories.filter((function(e){return e.id===t}));return a.length>0?a[0].name:""}},{title:"字典代码",dataIndex:"code",ellipsis:!0,sorter:!1},{title:"字典名称",dataIndex:"name",ellipsis:!0,sorter:!1}],dictButtons:[{id:1,text:"新增",icon:"iconfont-New",click:function(){t.editData={},t.openType="",t.addVisible=!0}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){t.editData=t.$refs.dictList.getSelected(),t.editData?(t.openType="edit",t.addVisible=!0):t.$message.warning("请选择一条记录！")}},{id:3,text:"删除",icon:"iconfont-Delete",click:function(){t.editData=t.$refs.dictList.getSelected(),t.editData?t.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){t.$bpmSystemProServices.systemService.deleteDict({id:t.editData.id}).then((function(e){e?(t.$message.success("删除成功"),t.$refs.dictList.clearSelected(),t.onSearch(),t.reloadDictItem()):t.$message.error("删除失败")}))},onCancel:function(){}}):t.$message.warning("请选择一条记录！")}}],dictItemColumns:[{title:"名称",dataIndex:"name",ellipsis:!0,align:"left",width:200},{title:"代码",dataIndex:"code",align:"center",width:100},{title:"顺序",dataIndex:"sort",align:"center",width:80}],dictItemButtons:[{id:1,text:"新增",icon:"iconfont-New",click:function(){t.editData=t.$refs.dictList.getSelected(),t.editItemData=t.$refs.dictItemList.getSelected(),t.editData?(t.editItemData={pid:t.editItemData&&t.editItemData.id||"",dicId:t.editData.id},t.allDic=t.$refs.dictItemList.getData(),t.openItemType="",t.addItemVisible=!0):t.$message.warning("请选择一个字典！")}},{id:2,text:"编辑",icon:"iconfont-Editor",click:function(){t.editItemData=t.$refs.dictItemList.getSelected(),t.editItemData?(t.openItemType="edit",t.allDic=t.$refs.dictItemList.getData(),t.addItemVisible=!0):t.$message.warning("请选择一个字典项！")}},{id:3,text:"删除",icon:"iconfont-Delete",click:function(){t.editItemData=t.$refs.dictItemList.getSelected(),t.editItemData?t.$confirm({title:"提示",content:"确定删除记录?",okText:"确认",cancelText:"取消",onOk:function(){t.$bpmSystemProServices.systemService.deleteDictItem({id:t.editItemData.id}).then((function(){t.$refs.dictItemList.clearSelected(),t.reloadDictItem()}))},onCancel:function(){}}):t.$message.warning("请选择一个字典项")}},{id:4,text:"刷新",icon:"iconfont-Refresh",click:function(){t.reloadDictItem()}}],openType:"",addVisible:!1,editData:{},openItemType:"",addItemVisible:!1,editItemData:{}}},methods:{getScrollY:function(){var e=this;this.$nextTick((function(){var t=e.$refs.dictList.$el.querySelector(".ant-table-wrapper");e.scrollY=t.offsetHeight-115}))},getCategories:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var a,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getCategoriesList();case 2:a=t.sent,e.dictCategories=a,i=e.dictCategories.filter((function(e){return"业务字典"===e.name})),i.length>0&&(e.dictParams.typeId=i[0].id),e.onSearch();case 7:case"end":return t.stop()}}),t)})))()},onSearch:function(){this.$refs.dictList.getListData()},reloadDictItem:function(){this.dictItemParams.dicId=this.editData.id,this.onSearch()},onDictListChange:function(e,t,a,i){i.currentDataSource;this.pagination.pageIndex=e.current,this.dictParams.sortField=a.field,this.dictParams.sortOrder=a.order,this.onSearch()},onDictRowClick:function(e){this.editData=this.$refs.dictList.getSelected(),this.dictItemParams.dicId=e.id,this.$refs.dictItemList.getListData(),this.$refs.dictItemList.clearSelected()},onDictRowDbClick:function(e){this.editData=e,this.openType="edit",this.addVisible=!0},onDictItemRowClick:function(e){this.editItemData=this.$refs.dictItemList.getSelected()},onDictItemRowDbClick:function(e){this.editItemData=e,this.openType="edit",this.addItemVisible=!0},onDictSubmit:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.onSearch();case 2:e&&t.$refs.dictList.setSelectedRow(e);case 3:case"end":return a.stop()}}),a)})))()},onDictItemSubmit:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.reloadDictItem();case 2:e&&t.$refs.dictItemList.setSelectedRow(e);case 3:case"end":return a.stop()}}),a)})))()}},components:{splitPane:c.a,SystemList:l["a"],AddDict:u["default"],AddDictItem:m["default"]}},f=d,p=(a("2422"),a("2877")),b=Object(p["a"])(f,i,n,!1,null,"731065e4",null);t["default"]=b.exports},6160:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,rules:e.rules,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:18}}},[t("a-form-model-item",{attrs:{label:"文号分类名称",prop:"numberName"}},[t("a-input",{model:{value:e.formData.numberName,callback:function(t){e.$set(e.formData,"numberName",t)},expression:"formData.numberName"}})],1)],1)],1)},n=[],r={name:"AddSymbol",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,default:"",required:!1}},data:function(){return{formData:{id:"",numberName:""},rules:{numberName:[{required:!0,message:"请输入文号分类名称"}]}}},computed:{title:function(){var e="新增";return"edit"===this.type&&(e="编辑"),"".concat(e,"文号分类")}},watch:{visible:function(e){var t=this;e?this.$nextTick((function(){t.resetFormData(),"edit"===t.type&&(t.formData=Object.assign(t.formData,t.editData))})):(this.formData.id="",this.resetFormData())}},methods:{resetFormData:function(){for(var e in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[e]=""},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.$bpmSystemProServices.systemService.saveOrUpdateSymbolList(e.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.id)):e.$message.error("保存失败"),e.$emit("update:visible",!1)}))}))},handleCancel:function(){this.$emit("update:visible",!1)}}},s=r,o=a("2877"),c=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=c.exports},a5ef:function(e,t,a){"use strict";a("ccfc")},a688:function(e,t,a){},a860:function(e,t,a){"use strict";a.r(t);a("4e82"),a("b0c0");var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,rules:e.rules,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20}}},[t("a-form-model-item",{attrs:{label:"父级字典",prop:"pid"}},[t("a-tree-select",{attrs:{showSearch:!0,treeData:e.allDic,treeNodeFilterProp:"title",replaceFields:e.replaceFields,"dropdown-style":{maxHeight:"400px",overflow:"auto"},allowClear:!0},model:{value:e.formData.pid,callback:function(t){e.$set(e.formData,"pid",t)},expression:"formData.pid"}})],1),t("a-form-model-item",{attrs:{label:"代码",prop:"code"}},[t("a-input",{model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1),t("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[t("a-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),t("a-form-model-item",{attrs:{label:"顺序",prop:"sort"}},[t("a-input-number",{model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1),t("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[t("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:5}},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)},n=[],r={name:"AddDictItem",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,required:!1,default:""},allDic:{type:Array,required:!1,default:function(){return[]}}},data:function(){var e=this;return{formData:{pid:"",dicId:"",id:"",sort:"",code:"",name:"",remark:""},rules:{code:[{validator:function(t,a,i){e.$bpmSystemProServices.systemService.validateDictItemCode({code:a,id:e.formData.id,dicId:e.formData.dicId}).then((function(e){0!==e&&"0"!==e?i(new Error("请输入唯一标识")):i()}))},trigger:"blur"},{required:!0,message:"请输入唯一标识"}],name:[{required:!0,message:"请输入字典项名称"}],sort:[{required:!0,message:"请输入顺序号"}]}}},computed:{title:function(){var e="新增";return"edit"===this.type&&(e="编辑"),"".concat(e,"字典项")},replaceFields:function(){return{children:"children",title:"name",key:"id",value:"id"}}},watch:{visible:function(e){var t=this;e?(this.resetFormData(),this.$nextTick((function(){t.formData=Object.assign(t.formData,t.editData)}))):this.resetFormData()}},methods:{resetFormData:function(){for(var e in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[e]=""},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.handleSubmit()}))},handleSubmit:function(){var e=this;this.formData.pid=this.formData.pid||"",this.$bpmSystemProServices.systemService.saveOrUpdateDictItem(this.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.id)):e.$message.error("保存失败"),e.$emit("update:visible",!1)}))},handleCancel:function(){this.$emit("update:visible",!1)}}},s=r,o=a("2877"),c=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=c.exports},abd2:function(e,t,a){"use strict";a.r(t);a("b0c0"),a("d3b7"),a("159b");var i=a("2b0e"),n=(a("b57e"),a("5124"));a.d(t,"Dict",(function(){return n["default"]}));var r=a("07e1");a.d(t,"Counter",(function(){return r["default"]}));var s=a("0a05");a.d(t,"SymbolGl",(function(){return s["default"]}));var o=a("260d");a.d(t,"Menus",(function(){return o["default"]}));var c=a("fd7a");a.d(t,"Pers",(function(){return c["default"]}));var l=a("8852");a.d(t,"Roles",(function(){return l["default"]}));var u=a("365c");i["a"].prototype.$bpmSystemProServices=u;var m=[n["default"],r["default"],s["default"],o["default"],c["default"],l["default"]],d=function(e){d.installed||(d.installed=!0,m.forEach((function(t){return e.component(t.name,t)})))};"undefined"!==typeof window&&window.Vue&&d(window.Vue);var f={install:d,Dict:n["default"],Counter:r["default"],SymbolGl:s["default"],Menus:o["default"],Pers:c["default"],Roles:l["default"]};t["default"]=f},b143:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"确定",cancelText:"取消",centered:""},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,rules:e.rules,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20}}},[t("a-form-model-item",{attrs:{label:"类别名称",prop:"name"}},[t("a-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),t("a-form-model-item",{attrs:{label:"排序号",prop:"sortNum"}},[t("a-input-number",{model:{value:e.formData.sortNum,callback:function(t){e.$set(e.formData,"sortNum",t)},expression:"formData.sortNum"}})],1)],1)],1)},n=[],r={name:"AddDict",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,required:!1,default:""}},data:function(){return{formData:{id:"",name:"",sortNum:""},rules:{name:[{required:!0,message:"请输入类别名称"}],sortNum:[{required:!0,message:"请输入排序号"}]}}},computed:{title:function(){var e="新增";return"edit"===this.type&&(e="编辑"),"".concat(e,"字典类别")}},watch:{visible:function(e){var t=this;e?this.$nextTick((function(){t.resetFormData(),"edit"===t.type&&(t.formData=Object.assign(t.formData,t.editData))})):this.resetFormData()}},methods:{resetFormData:function(){for(var e in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[e]=""},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.handleSubmit()}))},handleSubmit:function(){var e=this;this.$bpmSystemProServices.systemService.saveOrUpdateCategory(this.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.id)):e.$message.error("保存失败"),e.$emit("update:visible",!1)}))},handleCancel:function(){this.$emit("update:visible",!1)}}},s=r,o=a("2877"),c=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=c.exports},bfcc:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"文号格式",visible:e.visible,centered:""},on:{"update:visible":function(t){e.visible=t},cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:18}}},[t("div",{staticClass:"btn-container"},[t("a-button",{staticClass:"operate-btn",on:{click:e.setSymbolFormat}},[t("icon-font",{attrs:{type:"iconfont-save"}}),e._v("保存")],1)],1),t("div",{staticClass:"tab-container"},[t("a-tabs",{attrs:{"default-active-key":"str"},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[t("a-tab-pane",{key:"str",attrs:{tab:"添加字符"}},[t("a-form-model-item",{attrs:{label:"请输入字符","label-col":{span:4},"wrapper-col":{span:20},prop:"character"}},[t("a-input",{model:{value:e.formData.character,callback:function(t){e.$set(e.formData,"character",t)},expression:"formData.character"}})],1)],1),t("a-tab-pane",{key:"counter",attrs:{tab:"添加计数器"}},[t("a-form-model-item",{attrs:{label:"选择计数器","label-col":{span:4},"wrapper-col":{span:20},prop:"counterType"}},[t("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","option-filter-prop":"children","filter-option":e.filterOption},model:{value:e.formData.counterType,callback:function(t){e.$set(e.formData,"counterType",t)},expression:"formData.counterType"}},e._l(e.counters,(function(a){return t("a-select-option",{key:a.counterNumeric,attrs:{value:a.counterNumeric}},[e._v(" "+e._s(a.counterName)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"补零规则","label-col":{span:4},"wrapper-col":{span:20},prop:"counterRule"}},[t("a-radio-group",{model:{value:e.formData.counterRule,callback:function(t){e.$set(e.formData,"counterRule",t)},expression:"formData.counterRule"}},e._l(e.counterRule,(function(a){return t("a-radio",{key:a.code,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"最大长度","label-col":{span:4},"wrapper-col":{span:20},prop:"counterLength"}},[t("a-input-number",{attrs:{min:1,max:9},model:{value:e.formData.counterLength,callback:function(t){e.$set(e.formData,"counterLength",t)},expression:"formData.counterLength"}})],1)],1),t("a-tab-pane",{key:"date",attrs:{tab:"添加日期"}},[t("a-form-model-item",{attrs:{label:"日期规则","label-col":{span:4},"wrapper-col":{span:20},prop:"dateRule"}},[t("a-select",{staticStyle:{width:"100%"},model:{value:e.formData.dateRule,callback:function(t){e.$set(e.formData,"dateRule",t)},expression:"formData.dateRule"}},e._l(e.dateRule,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"日期长度","label-col":{span:4},"wrapper-col":{span:20},prop:"dateLength"}},[t("a-radio-group",{attrs:{"default-value":4},model:{value:e.formData.dateLength,callback:function(t){e.$set(e.formData,"dateLength",t)},expression:"formData.dateLength"}},e._l(e.dateLength,(function(a){return t("a-radio",{key:a.code,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1)],1)],1),t("a-form-model-item",{attrs:{label:"文号格式","label-col":{span:4},"wrapper-col":{span:20},prop:"symbolFormat"}},[t("a-input",{staticStyle:{width:"calc(100% - 125px)"},attrs:{disabled:"disabled"},model:{value:e.formData.symbolFormat,callback:function(t){e.$set(e.formData,"symbolFormat",t)},expression:"formData.symbolFormat"}}),t("a-button",{staticStyle:{"margin-left":"8px","margin-right":"8px"},on:{click:e.clearSymbol}},[e._v("清除")]),t("a-button",{attrs:{type:"primary"},on:{click:e.previewSymbol}},[e._v("预览")])],1)],1),t("template",{slot:"footer"},[t("a-button",{attrs:{type:"default"},on:{click:e.handleCancel}},[e._v("取消")]),t("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("确定")])],1)],2)},n=[],r=a("5530"),s=a("c7eb"),o=a("1da1"),c=(a("d81d"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),{name:"EditSymbolFormat",props:{visible:{type:Boolean,default:!1,required:!0},numericCode:{type:String,default:"",required:!1}},data:function(){return{formData:{symbolFormat:"",character:"",counterType:"",counterRule:"",counterLength:"",dateRule:"",dateLength:""},dateRule:[],dateLength:[],counterRule:[],activeTabName:"str",symbolFormatResult:"",counters:[],tempstr:""}},created:function(){this.getCounters(),this.getDateRule(),this.getDateLength(),this.getCounterRule()},watch:{visible:function(e){var t=this;e?this.$nextTick((function(){t.resetFormData(),t.numericCode&&(t.formData.symbolFormat=t.numericCode,t.updateDateTab(),t.updateNumTab())})):this.resetFormData()}},methods:{getCounters:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getCounterListForSymbol();case 2:a=t.sent,e.counters=a;case 4:case"end":return t.stop()}}),t)})))()},getType:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getDictByCode("ZYLX");case 2:a=t.sent,e.zylx=a.map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{code:parseInt(e.code)})}));case 4:case"end":return t.stop()}}),t)})))()},getDateRule:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getDictByCode("RQGZ");case 2:a=t.sent,e.dateRule=a;case 4:case"end":return t.stop()}}),t)})))()},getDateLength:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getDictByCode("RQCD");case 2:a=t.sent,e.dateLength=a;case 4:case"end":return t.stop()}}),t)})))()},getCounterRule:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getDictByCode("BLGZ");case 2:a=t.sent,e.counterRule=a;case 4:case"end":return t.stop()}}),t)})))()},resetFormData:function(){for(var e in this.formData)this.formData[e]=""},handleOk:function(){this.$message.success("设置成功"),this.$emit("update:visible",!1),this.$emit("submit",this.formData.symbolFormat)},handleCancel:function(){this.$emit("update:visible",!1)},setSymbolFormat:function(){if("str"===this.activeTabName){if(!this.formData.character)return this.$message.warning("请输入要添加的字符"),!1;this.symbolFormatResult+=this.formData.character}else"counter"===this.activeTabName?this.formData.counterType?this.formData.counterRule?this.formData.counterLength?"B"===this.formData.counterRule?(this.symbolFormatResult+="%",this.symbolFormatResult+=this.formData.counterRule,this.symbolFormatResult+=this.formData.counterLength,this.symbolFormatResult+="[&",this.symbolFormatResult+=this.formData.counterType,this.symbolFormatResult+="]"):(this.symbolFormatResult+="%",this.symbolFormatResult+=this.formData.counterLength,this.symbolFormatResult+="[&",this.symbolFormatResult+=this.formData.counterType,this.symbolFormatResult+="]"):this.$message.warning("请选择计数器最大长度"):this.$message.warning("请选择补零规则"):this.$message.warning("请选择具体计数器"):"date"===this.activeTabName&&(this.formData.dateRule?this.formData.dateLength?(this.symbolFormatResult+="%",this.symbolFormatResult+=this.formData.dateLength,this.symbolFormatResult+=this.formData.dateRule):this.$message.warning("请选择日期长度"):this.$message.warning("请选择日期规则"));this.formData.symbolFormat=this.symbolFormatResult},clearSymbol:function(){this.formData.symbolFormat="",this.symbolFormatResult="",this.$refs.form.resetFields()},updateDateTab:function(){this.tempstr=new RegExp("%[2-4][YMD]").exec(this.numericCode),this.tempstr&&this.tempstr.length>0&&(this.tempstr=this.tempstr[0].replace("%",""),this.formData.dateLength=this.tempstr.charAt(0),this.formData.dateRule=this.tempstr.charAt(1))},updateNumTab:function(){this.tempstr=/%[1-9]\[&[0-9a-z]{8}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{12}]/,this.tempstr=this.tempstr.exec(this.numericCode),this.tempstr&&this.tempstr.length>0?(this.formData.counterLength=this.tempstr[0].charAt(1),this.formData.counterRule="Y",this.formData.counterType=this.tempstr[0].split("&")[1].split("]")[0]):(this.tempstr=/%[B][1-9]\[&[0-9a-z]{8}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{12}]/,this.tempstr=this.tempstr.exec(this.numericCode),this.formData.counterLength=this.tempstr[0].charAt(2),this.formData.counterRule="B",this.formData.counterType=this.tempstr[0].split("&")[1].split("]")[0])},previewSymbol:function(){var e=this;this.formData.symbolFormat?this.$bpmSystemProServices.systemService.previewSymbol({numberCode:this.formData.symbolFormat}).then((function(t){e.$message.info(t)})):this.$message.warning("请先设置文号格式")},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}}),l=c,u=(a("3f53"),a("2877")),m=Object(u["a"])(l,i,n,!1,null,"d9b05468",null);t["default"]=m.exports},ccfc:function(e,t,a){},fa68:function(e,t,a){"use strict";a("160f")}}]);