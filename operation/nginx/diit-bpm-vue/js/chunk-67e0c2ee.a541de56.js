(this["webpackJsonpMyLibrary"]=this["webpackJsonpMyLibrary"]||[]).push([["chunk-67e0c2ee","chunk-112c9d34"],{"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("d3b7");function r(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(o,n){var s=t.apply(e,a);function i(t){r(s,o,n,i,c,"next",t)}function c(t){r(s,o,n,i,c,"throw",t)}i(void 0)}))}}},"1ffa":function(t,e,a){},"3f53":function(t,e,a){"use strict";a("1ffa")},bfcc:function(t,e,a){"use strict";a.r(e);a("b0c0");var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:"文号格式",visible:t.visible,centered:""},on:{"update:visible":function(e){t.visible=e},cancel:t.handleCancel}},[e("a-form-model",{ref:"form",attrs:{model:t.formData,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:18}}},[e("div",{staticClass:"btn-container"},[e("a-button",{staticClass:"operate-btn",on:{click:t.setSymbolFormat}},[e("icon-font",{attrs:{type:"iconfont-save"}}),t._v("保存")],1)],1),e("div",{staticClass:"tab-container"},[e("a-tabs",{attrs:{"default-active-key":"str"},model:{value:t.activeTabName,callback:function(e){t.activeTabName=e},expression:"activeTabName"}},[e("a-tab-pane",{key:"str",attrs:{tab:"添加字符"}},[e("a-form-model-item",{attrs:{label:"请输入字符","label-col":{span:4},"wrapper-col":{span:20},prop:"character"}},[e("a-input",{model:{value:t.formData.character,callback:function(e){t.$set(t.formData,"character",e)},expression:"formData.character"}})],1)],1),e("a-tab-pane",{key:"counter",attrs:{tab:"添加计数器"}},[e("a-form-model-item",{attrs:{label:"选择计数器","label-col":{span:4},"wrapper-col":{span:20},prop:"counterType"}},[e("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","option-filter-prop":"children","filter-option":t.filterOption},model:{value:t.formData.counterType,callback:function(e){t.$set(t.formData,"counterType",e)},expression:"formData.counterType"}},t._l(t.counters,(function(a){return e("a-select-option",{key:a.counterNumeric,attrs:{value:a.counterNumeric}},[t._v(" "+t._s(a.counterName)+" ")])})),1)],1),e("a-form-model-item",{attrs:{label:"补零规则","label-col":{span:4},"wrapper-col":{span:20},prop:"counterRule"}},[e("a-radio-group",{model:{value:t.formData.counterRule,callback:function(e){t.$set(t.formData,"counterRule",e)},expression:"formData.counterRule"}},t._l(t.counterRule,(function(a){return e("a-radio",{key:a.code,attrs:{value:a.code}},[t._v(" "+t._s(a.name)+" ")])})),1)],1),e("a-form-model-item",{attrs:{label:"最大长度","label-col":{span:4},"wrapper-col":{span:20},prop:"counterLength"}},[e("a-input-number",{attrs:{min:1,max:9},model:{value:t.formData.counterLength,callback:function(e){t.$set(t.formData,"counterLength",e)},expression:"formData.counterLength"}})],1)],1),e("a-tab-pane",{key:"date",attrs:{tab:"添加日期"}},[e("a-form-model-item",{attrs:{label:"日期规则","label-col":{span:4},"wrapper-col":{span:20},prop:"dateRule"}},[e("a-select",{staticStyle:{width:"100%"},model:{value:t.formData.dateRule,callback:function(e){t.$set(t.formData,"dateRule",e)},expression:"formData.dateRule"}},t._l(t.dateRule,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.code}},[t._v(" "+t._s(a.name)+" ")])})),1)],1),e("a-form-model-item",{attrs:{label:"日期长度","label-col":{span:4},"wrapper-col":{span:20},prop:"dateLength"}},[e("a-radio-group",{attrs:{"default-value":4},model:{value:t.formData.dateLength,callback:function(e){t.$set(t.formData,"dateLength",e)},expression:"formData.dateLength"}},t._l(t.dateLength,(function(a){return e("a-radio",{key:a.code,attrs:{value:a.code}},[t._v(" "+t._s(a.name)+" ")])})),1)],1)],1)],1)],1),e("a-form-model-item",{attrs:{label:"文号格式","label-col":{span:4},"wrapper-col":{span:20},prop:"symbolFormat"}},[e("a-input",{staticStyle:{width:"calc(100% - 125px)"},attrs:{disabled:"disabled"},model:{value:t.formData.symbolFormat,callback:function(e){t.$set(t.formData,"symbolFormat",e)},expression:"formData.symbolFormat"}}),e("a-button",{staticStyle:{"margin-left":"8px","margin-right":"8px"},on:{click:t.clearSymbol}},[t._v("清除")]),e("a-button",{attrs:{type:"primary"},on:{click:t.previewSymbol}},[t._v("预览")])],1)],1),e("template",{slot:"footer"},[e("a-button",{attrs:{type:"default"},on:{click:t.handleCancel}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("确定")])],1)],2)},o=[],n=a("5530"),s=a("c14f"),i=a("1da1"),c=(a("d81d"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),{name:"EditSymbolFormat",props:{visible:{type:Boolean,default:!1,required:!0},numericCode:{type:String,default:"",required:!1}},data:function(){return{formData:{symbolFormat:"",character:"",counterType:"",counterRule:"",counterLength:"",dateRule:"",dateLength:""},dateRule:[],dateLength:[],counterRule:[],activeTabName:"str",symbolFormatResult:"",counters:[],tempstr:""}},created:function(){this.getCounters(),this.getDateRule(),this.getDateLength(),this.getCounterRule()},watch:{visible:function(t){var e=this;t?this.$nextTick((function(){e.resetFormData(),e.numericCode&&(e.formData.symbolFormat=e.numericCode,e.updateDateTab(),e.updateNumTab())})):this.resetFormData()}},methods:{getCounters:function(){var t=this;return Object(i["a"])(Object(s["a"])().m((function e(){var a;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getCounterListForSymbol();case 1:a=e.v,t.counters=a;case 2:return e.a(2)}}),e)})))()},getType:function(){var t=this;return Object(i["a"])(Object(s["a"])().m((function e(){var a;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getDictByCode("ZYLX");case 1:a=e.v,t.zylx=a.map((function(t){return Object(n["a"])(Object(n["a"])({},t),{},{code:parseInt(t.code)})}));case 2:return e.a(2)}}),e)})))()},getDateRule:function(){var t=this;return Object(i["a"])(Object(s["a"])().m((function e(){var a;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getDictByCode("RQGZ");case 1:a=e.v,t.dateRule=a;case 2:return e.a(2)}}),e)})))()},getDateLength:function(){var t=this;return Object(i["a"])(Object(s["a"])().m((function e(){var a;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getDictByCode("RQCD");case 1:a=e.v,t.dateLength=a;case 2:return e.a(2)}}),e)})))()},getCounterRule:function(){var t=this;return Object(i["a"])(Object(s["a"])().m((function e(){var a;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.$bpmSystemProServices.systemService.getDictByCode("BLGZ");case 1:a=e.v,t.counterRule=a;case 2:return e.a(2)}}),e)})))()},resetFormData:function(){for(var t in this.formData)this.formData[t]=""},handleOk:function(){this.$message.success("设置成功"),this.$emit("update:visible",!1),this.$emit("submit",this.formData.symbolFormat)},handleCancel:function(){this.$emit("update:visible",!1)},setSymbolFormat:function(){if("str"===this.activeTabName){if(!this.formData.character)return this.$message.warning("请输入要添加的字符"),!1;this.symbolFormatResult+=this.formData.character}else"counter"===this.activeTabName?this.formData.counterType?this.formData.counterRule?this.formData.counterLength?"B"===this.formData.counterRule?(this.symbolFormatResult+="%",this.symbolFormatResult+=this.formData.counterRule,this.symbolFormatResult+=this.formData.counterLength,this.symbolFormatResult+="[&",this.symbolFormatResult+=this.formData.counterType,this.symbolFormatResult+="]"):(this.symbolFormatResult+="%",this.symbolFormatResult+=this.formData.counterLength,this.symbolFormatResult+="[&",this.symbolFormatResult+=this.formData.counterType,this.symbolFormatResult+="]"):this.$message.warning("请选择计数器最大长度"):this.$message.warning("请选择补零规则"):this.$message.warning("请选择具体计数器"):"date"===this.activeTabName&&(this.formData.dateRule?this.formData.dateLength?(this.symbolFormatResult+="%",this.symbolFormatResult+=this.formData.dateLength,this.symbolFormatResult+=this.formData.dateRule):this.$message.warning("请选择日期长度"):this.$message.warning("请选择日期规则"));this.formData.symbolFormat=this.symbolFormatResult},clearSymbol:function(){this.formData.symbolFormat="",this.symbolFormatResult="",this.$refs.form.resetFields()},updateDateTab:function(){this.tempstr=new RegExp("%[2-4][YMD]").exec(this.numericCode),this.tempstr&&this.tempstr.length>0&&(this.tempstr=this.tempstr[0].replace("%",""),this.formData.dateLength=this.tempstr.charAt(0),this.formData.dateRule=this.tempstr.charAt(1))},updateNumTab:function(){this.tempstr=/%[1-9]\[&[0-9a-z]{8}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{12}]/,this.tempstr=this.tempstr.exec(this.numericCode),this.tempstr&&this.tempstr.length>0?(this.formData.counterLength=this.tempstr[0].charAt(1),this.formData.counterRule="Y",this.formData.counterType=this.tempstr[0].split("&")[1].split("]")[0]):(this.tempstr=/%[B][1-9]\[&[0-9a-z]{8}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{4}[0-9a-z]{12}]/,this.tempstr=this.tempstr.exec(this.numericCode),this.formData.counterLength=this.tempstr[0].charAt(2),this.formData.counterRule="B",this.formData.counterType=this.tempstr[0].split("&")[1].split("]")[0])},previewSymbol:function(){var t=this;this.formData.symbolFormat?this.$bpmSystemProServices.systemService.previewSymbol({numberCode:this.formData.symbolFormat}).then((function(e){t.$message.info(e)})):this.$message.warning("请先设置文号格式")},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}}}),u=c,l=(a("3f53"),a("2877")),m=Object(l["a"])(u,r,o,!1,null,"d9b05468",null);e["default"]=m.exports},c14f:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("a4d3"),a("e01a"),a("3410"),a("131a"),a("d3b7");function r(t,e,a,o){var n=Object.defineProperty;try{n({},"",{})}catch(t){n=0}r=function(t,e,a,o){if(e)n?n(t,e,{value:a,enumerable:!o,configurable:!o,writable:!o}):t[e]=a;else{var s=function(e,a){r(t,e,(function(t){return this._invoke(e,a,t)}))};s("next",0),s("throw",1),s("return",2)}},r(t,e,a,o)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var t,e,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",s=a.toStringTag||"@@toStringTag";function i(a,o,n,s){var i=o&&o.prototype instanceof u?o:u,l=Object.create(i.prototype);return r(l,"_invoke",function(a,r,o){var n,s,i,u=0,l=o||[],m=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,a){return n=e,s=0,i=t,f.n=a,c}};function h(a,r){for(s=a,i=r,e=0;!m&&u&&!o&&e<l.length;e++){var o,n=l[e],h=f.p,p=n[2];a>3?(o=p===r)&&(i=n[(s=n[4])?5:(s=3,3)],n[4]=n[5]=t):n[0]<=h&&((o=a<2&&h<n[1])?(s=0,f.v=r,f.n=n[1]):h<p&&(o=a<3||n[0]>r||r>p)&&(n[4]=a,n[5]=r,f.n=p,s=0))}if(o||a>1)return c;throw m=!0,r}return function(o,l,p){if(u>1)throw TypeError("Generator is already running");for(m&&1===l&&h(l,p),s=l,i=p;(e=s<2?t:i)||!m;){n||(s?s<3?(s>1&&(f.n=-1),h(s,i)):f.n=i:f.v=i);try{if(u=2,n){if(s||(o="next"),e=n[o]){if(!(e=e.call(n,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,s<2&&(s=0)}else 1===s&&(e=n["return"])&&e.call(n),s<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),s=1);n=t}else if((e=(m=f.n<0)?i:a.call(r,f))!==c)break}catch(e){n=t,s=1,i=e}finally{u=1}}return{value:e,done:m}}}(a,n,s),!0),l}var c={};function u(){}function l(){}function m(){}e=Object.getPrototypeOf;var f=[][n]?e(e([][n]())):(r(e={},n,(function(){return this})),e),h=m.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,r(t,s,"GeneratorFunction")),t.prototype=Object.create(h),t}return l.prototype=m,r(h,"constructor",m),r(m,"constructor",l),l.displayName="GeneratorFunction",r(m,s,"GeneratorFunction"),r(h),r(h,s,"Generator"),r(h,n,(function(){return this})),r(h,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:i,m:p}})()}}}]);