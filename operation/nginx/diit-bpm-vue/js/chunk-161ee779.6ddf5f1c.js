(this["webpackJsonpMyLibrary"]=this["webpackJsonpMyLibrary"]||[]).push([["chunk-161ee779","chunk-2d210c29"],{"1bde":function(e,t,a){"use strict";a("bd0b")},a005:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"确定",cancelText:"取消",centered:"",width:"50%"},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.formData,rules:e.rules,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:18}}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"机构名称",prop:"name"}},[t("a-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"简称",prop:"shortName"}},[t("a-input",{model:{value:e.formData.shortName,callback:function(t){e.$set(e.formData,"shortName",t)},expression:"formData.shortName"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"组织类型",prop:"orgType"}},[t("a-select",{model:{value:e.formData.orgType,callback:function(t){e.$set(e.formData,"orgType",t)},expression:"formData.orgType"}},e._l(e.bmxz,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[t("a-select",{model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},e._l(e.status,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"顺序号",prop:"sortNum"}},[t("a-input-number",{staticStyle:{width:"100%"},model:{value:e.formData.sortNum,callback:function(t){e.$set(e.formData,"sortNum",t)},expression:"formData.sortNum"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"行政区划",prop:"xzqh"}},[t("a-tree-select",{attrs:{"tree-data":e.xzqh,replaceFields:e.xzqReplaceFields,"allow-clear":"","dropdown-style":{maxHeight:"400px",overflow:"auto"}},model:{value:e.formData.xzqh,callback:function(t){e.$set(e.formData,"xzqh",t)},expression:"formData.xzqh"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"机构类型",prop:"depType"}},[t("a-select",{model:{value:e.formData.depType,callback:function(t){e.$set(e.formData,"depType",t)},expression:"formData.depType"}},e._l(e.jglx,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"上级部门",prop:"pid"}},[t("a-tree-select",{attrs:{"tree-data":e.depts,replaceFields:e.replaceFields,"allow-clear":""},model:{value:e.formData.pid,callback:function(t){e.$set(e.formData,"pid",t)},expression:"formData.pid"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"备注",prop:"remark","label-col":{span:3},"wrapper-col":{span:21}}},[t("a-textarea",{attrs:{placeholder:"备注","auto-size":{minRows:3,maxRows:5}},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),t("RoleSelect",{attrs:{visible:e.selectVisible,roleId:e.roleId},on:{"update:visible":function(t){e.selectVisible=t},submit:e.setSsld}})],1)},s=[],i=a("c7eb"),n=a("1da1"),o=(a("4de4"),a("d3b7"),a("ca00")),l=a("b8eb"),c={name:"AddDept",props:{visible:{type:Boolean,default:!1,required:!0},editData:{type:Object,required:!1,default:function(){return{}}},type:{type:String,default:"",required:!1}},created:function(){this.getDictInfo(),this.getLeaderList()},data:function(){return{bmxz:[],xzqh:[],ssld:[],bmssld:[],formData:{id:"",name:"",shortName:"",bmxz:"",xzqh:"",pid:"",ssld:"",ssldmc:"",sortNum:"",remark:"",status:"1",orgType:"",depType:""},rules:{name:[{required:!0,message:"请输入部门名称"}],status:[{required:!0,message:"请选择部门状态"}],bmxz:[{required:!0,message:"请选择组织类型"}],sortNum:[{required:!0,message:"请输入顺序号"}]},replaceFields:{title:"name",key:"id",value:"id"},xzqReplaceFields:{title:"name",key:"id",value:"code"},depts:[],selectVisible:!1,roleId:"7184a5a9b21e458f92757c7bc17a6749",status:[],jglx:[]}},computed:{title:function(){var e="新增";return"edit"===this.type&&(e="编辑"),"".concat(e,"部门")}},watch:{visible:function(e){var t=this;e?(this.getDictInfo(),this.$nextTick((function(){t.resetFormData(),t.type,t.formData=Object.assign(t.formData,t.editData)}))):this.resetFormData()}},methods:{getDictInfo:function(){this.getDepts(),this.getBmxz(),this.getXzq(),this.getStatus()},getDepts:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.persService.getDeptList();case 2:a=t.sent,r=a.filter((function(e){return!e.pid||""===e.pid})),Object(o["b"])(r,a),e.depts=r;case 6:case"end":return t.stop()}}),t)})))()},getBmxz:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getDictByCode("ZZLX");case 2:a=t.sent,e.bmxz=a;case 4:case"end":return t.stop()}}),t)})))()},getStatus:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getDictByCode("YHZT");case 2:return a=t.sent,e.status=a,t.next=6,e.$bpmSystemProServices.systemService.getDictByCode("JGLX");case 6:e.jglx=t.sent;case 7:case"end":return t.stop()}}),t)})))()},getXzq:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.systemService.getDictByCode("XZQH");case 2:a=t.sent,r=a.filter((function(e){return!e.pid||""===e.pid})),Object(o["b"])(r,a),e.xzqh=r;case 6:case"end":return t.stop()}}),t)})))()},getLeaderList:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bpmSystemProServices.persService.getLeaderList();case 2:a=t.sent,e.bmssld=a;case 4:case"end":return t.stop()}}),t)})))()},resetFormData:function(){for(var e in this.$refs.form&&this.$refs.form.resetFields(),this.formData)this.formData[e]="";this.formData.status="1"},selectLeader:function(){this.selectVisible=!0},setSsld:function(e){e.length>0?(this.ssld=e[0].id,this.ssldmc=e[0].name):(this.ssld="",this.ssldmc="")},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.handleSubmit()}))},handleSubmit:function(){var e=this;this.formData.pid||(this.formData.pid=""),"edit"===this.type?this.$bpmSystemProServices.persService.updateDept(this.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.id),e.$emit("update:visible",!1)):e.$message.success("保存失败")})):this.$bpmSystemProServices.persService.saveDept(this.formData).then((function(t){t?(e.$message.success("保存成功"),e.$emit("submit",e.formData.id),e.$emit("update:visible",!1)):e.$message.success("保存失败")}))},handleCancel:function(){this.$emit("update:visible",!1)}},components:{RoleSelect:l["default"]}},m=c,u=(a("1bde"),a("2877")),d=Object(u["a"])(m,r,s,!1,null,"5b28f5a2",null);t["default"]=d.exports},b8eb:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"选择分管领导",visible:e.visible,okText:"确定",cancelText:"取消",centered:"",width:"800px"},on:{"update:visible":function(t){e.visible=t},ok:e.handleOk,cancel:e.handleCancel}},[t("SystemList",{ref:"leaderList",attrs:{columns:e.leaderColumns,render:e.$bpmSystemProServices.persService.getRolesList,params:e.leaderParams,pagination:e.pagination,type:"radio"},on:{"update:pagination":function(t){e.pagination=t},change:e.onLeaerChange}})],1)},s=[],i=a("d8b8"),n={name:"RoleList",props:{visible:{type:Boolean,default:!1,required:!0},roleId:{type:String,default:"",required:!1}},data:function(){return{leaderParams:{roleId:this.roleId},leaderColumns:[{title:"序号",customRender:function(e,t,a){return"".concat(a+1)},width:"10%",align:"center"},{title:"部门名称",dataIndex:"dename",width:"50%",sorter:!0},{title:"账号",dataIndex:"loginName",width:"20%",align:"center",sorter:!0},{title:"姓名",dataIndex:"name",width:"20%",align:"center",sorter:!0}],pagination:{pageIndex:1,pageSize:20,total:0},selectedRowKeys:[],selectedRows:[]}},methods:{onSearch:function(){this.$refs.leaderList.getListData()},onLeaerChange:function(e,t,a,r){r.currentDataSource;this.pagination.pageIndex=e.current,this.leaderParams.sortField=a.field,this.leaderParams.sortOrder=a.order,this.onSearch()},handleOk:function(){this.$emit("update:visible",!1),this.$emit("submit",this.selectedRows)},handleCancel:function(){this.$emit("update:visible",!1)}},components:{SystemList:i["a"]}},o=n,l=a("2877"),c=Object(l["a"])(o,r,s,!1,null,null,null);t["default"]=c.exports},bd0b:function(e,t,a){}}]);